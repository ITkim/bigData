!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.pako=t()}}(function(){return function t(e,a,n){function r(s,h){if(!a[s]){if(!e[s]){var l="function"==typeof require&&require;if(!h&&l)return l(s,!0);if(i)return i(s,!0);var o=new Error("Cannot find module '"+s+"'");throw o.code="MODULE_NOT_FOUND",
o;}var _=a[s]={exports:{}};e[s][0].call(_.exports,function(t){var a=e[s][1][t];return r(a?a:t)},_,_.exports,t,e,a,n)}return a[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,a){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");
for(var n in a)a.hasOwnProperty(n)&&(t[n]=a[n])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,a,n,r){if(e.subarray&&t.subarray)return void t.set(e.subarray(a,a+n),r);for(var i=0;n>i;i++)t[r+i]=e[a+i]},flattenChunks:function(t){var e,a,n,r,i,s;for(n=0,e=0,a=t.length;a>e;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,a=t.length;a>e;e++)i=t[e],s.set(i,r),r+=i.length;return s}},i={arraySet:function(t,e,a,n,r){for(var i=
0;n>i;i++)t[r+i]=e[a+i]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,r)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,i))},a.setTyped(n)},{}],2:[function(t,e,a){function n(t,e){if(65537>e&&(t.subarray&&s||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var a="",n=0;e>n;n++)a+=String.fromCharCode(t[n]);return a}var r=t("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,
[0])}catch(h){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){s=!1}for(var l=new r.Buf8(256),o=0;256>o;o++)l[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;l[254]=l[254]=1,a.string2buf=function(t){var e,a,n,i,s,h=t.length,l=0;for(i=0;h>i;i++)a=t.charCodeAt(i),55296===(64512&a)&&h>i+1&&(n=t.charCodeAt(i+1),56320===(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),i++)),l+=128>a?1:2048>a?2:65536>a?3:4;for(e=new r.Buf8(l),s=0,i=0;l>s;i++)a=t.charCodeAt(i),55296===(64512&a)&&h>i+1&&(n=
t.charCodeAt(i+1),56320===(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),i++)),128>a?e[s++]=a:2048>a?(e[s++]=192|a>>>6,e[s++]=128|63&a):65536>a?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},a.buf2binstring=function(t){return n(t,t.length)},a.binstring2buf=function(t){for(var e=new r.Buf8(t.length),a=0,n=e.length;n>a;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,r,i,s,h=e||t.length,o=
new Array(2*h);for(r=0,a=0;h>a;)if(i=t[a++],128>i)o[r++]=i;else if(s=l[i],s>4)o[r++]=65533,a+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&h>a;)i=i<<6|63&t[a++],s--;s>1?o[r++]=65533:65536>i?o[r++]=i:(i-=65536,o[r++]=55296|i>>10&1023,o[r++]=56320|1023&i)}return n(o,r)},a.utf8border=function(t,e){var a;for(e=e||t.length,e>t.length&&(e=t.length),a=e-1;a>=0&&128===(192&t[a]);)a--;return 0>a?e:0===a?e:a+l[t[a]]>e?a:e}},{"./common":1}],3:[function(t,e,a){function n(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|
0,s=0;0!==a;){s=a>2E3?2E3:a,a-=s;do r=r+e[n++]|0,i=i+r|0;while(--s);r%=65521,i%=65521}return r|i<<16|0}e.exports=n},{}],4:[function(t,e,a){function n(){for(var t,e=[],a=0;256>a;a++){t=a;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}function r(t,e,a,n){var r=i,s=n+a;t=-1^t;for(var h=n;s>h;h++)t=t>>>8^r[255&(t^e[h])];return-1^t}var i=n();e.exports=r},{}],5:[function(t,e,a){function n(t,e){return t.msg=I[e],e}function r(t){return(t<<1)-(t>4?9:0)}function i(t){for(var e=t.length;--e>=
0;)t[e]=0}function s(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(S.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function h(t,e){j._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function o(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=
255&e}function _(t,e,a,n){var r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,S.arraySet(e,t.input,t.next_in,r,a),1===t.state.wrap?t.adler=E(t.adler,e,r,a):2===t.state.wrap&&(t.adler=U(t.adler,e,r,a)),t.next_in+=r,t.total_in+=r,r)}function d(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-ot?t.strstart-(t.w_size-ot):0,o=t.window,_=t.w_mask,d=t.prev,u=t.strstart+lt,f=o[i+s-1],c=o[i+s];t.prev_length>=t.good_match&&(r>>=2),h>t.lookahead&&(h=t.lookahead);
do if(a=e,o[a+s]===c&&o[a+s-1]===f&&o[a]===o[i]&&o[++a]===o[i+1]){i+=2,a++;do;while(o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&o[++i]===o[++a]&&u>i);if(n=lt-(u-i),i=u-lt,n>s){if(t.match_start=e,s=n,n>=h)break;f=o[i+s-1],c=o[i+s]}}while((e=d[e&_])>l&&0!==--r);return s<=t.lookahead?s:t.lookahead}function u(t){var e,a,n,r,i,s=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-ot)){S.arraySet(t.window,t.window,
s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,a=t.hash_size,e=a;do n=t.head[--e],t.head[e]=n>=s?n-s:0;while(--a);a=s,e=a;do n=t.prev[--e],t.prev[e]=n>=s?n-s:0;while(--a);r+=s}if(0===t.strm.avail_in)break;if(a=_(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=a,t.lookahead+t.insert>=ht)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+ht-1])&t.hash_mask,t.prev[i&t.w_mask]=t.head[t.ins_h],
t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<ht)););}while(t.lookahead<ot&&0!==t.strm.avail_in)}function f(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(u(t),0===t.lookahead&&e===D)return bt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,h(t,!1),0===t.strm.avail_out))return bt;if(t.strstart-t.block_start>=t.w_size-ot&&(h(t,!1),
0===t.strm.avail_out))return bt}return t.insert=0,e===T?(h(t,!0),0===t.strm.avail_out?wt:yt):t.strstart>t.block_start&&(h(t,!1),0===t.strm.avail_out)?bt:bt}function c(t,e){for(var a,n;;){if(t.lookahead<ot){if(u(t),t.lookahead<ot&&e===D)return bt;if(0===t.lookahead)break}if(a=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ot&&(t.match_length=d(t,a)),t.match_length>=
ht)if(n=j._tr_tally(t,t.strstart-t.match_start,t.match_length-ht),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ht){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;
else n=j._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(h(t,!1),0===t.strm.avail_out))return bt}return t.insert=t.strstart<ht-1?t.strstart:ht-1,e===T?(h(t,!0),0===t.strm.avail_out?wt:yt):t.last_lit&&(h(t,!1),0===t.strm.avail_out)?bt:vt}function g(t,e){for(var a,n,r;;){if(t.lookahead<ot){if(u(t),t.lookahead<ot&&e===D)return bt;if(0===t.lookahead)break}if(a=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=
t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ht-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ot&&(t.match_length=d(t,a),t.match_length<=5&&(t.strategy===P||t.match_length===ht&&t.strstart-t.match_start>4096)&&(t.match_length=ht-1)),t.prev_length>=ht&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-ht,n=j._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ht),t.lookahead-=t.prev_length-1,t.prev_length-=
2;do++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=ht-1,t.strstart++,n&&(h(t,!1),0===t.strm.avail_out))return bt}else if(t.match_available){if(n=j._tr_tally(t,0,t.window[t.strstart-1]),n&&h(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return bt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&
(n=j._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ht-1?t.strstart:ht-1,e===T?(h(t,!0),0===t.strm.avail_out?wt:yt):t.last_lit&&(h(t,!1),0===t.strm.avail_out)?bt:vt}function p(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=lt){if(u(t),t.lookahead<=lt&&e===D)return bt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ht&&t.strstart>0&&(r=t.strstart-1,n=s[r],n===s[++r]&&n===s[++r]&&n===s[++r])){i=t.strstart+lt;do;while(n===s[++r]&&n===s[++r]&&n===s[++r]&&
n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&i>r);t.match_length=lt-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ht?(a=j._tr_tally(t,1,t.match_length-ht),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=j._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(h(t,!1),0===t.strm.avail_out))return bt}return t.insert=0,e===T?(h(t,!0),0===t.strm.avail_out?wt:yt):t.last_lit&&(h(t,!1),0===t.strm.avail_out)?bt:vt}
function m(t,e){for(var a;;){if(0===t.lookahead&&(u(t),0===t.lookahead)){if(e===D)return bt;break}if(t.match_length=0,a=j._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(h(t,!1),0===t.strm.avail_out))return bt}return t.insert=0,e===T?(h(t,!0),0===t.strm.avail_out?wt:yt):t.last_lit&&(h(t,!1),0===t.strm.avail_out)?bt:vt}function b(t){t.window_size=2*t.w_size,i(t.head),t.max_lazy_match=C[t.level].max_lazy,t.good_match=C[t.level].good_length,t.nice_match=C[t.level].nice_length,t.max_chain_length=
C[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ht-1,t.match_available=0,t.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=
0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*it),this.dyn_dtree=new S.Buf16(2*(2*nt+1)),this.bl_tree=new S.Buf16(2*(2*rt+1)),i(this.dyn_ltree),i(this.dyn_dtree),i(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=
new S.Buf16(st+1),this.heap=new S.Buf16(2*at+1),i(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*at+1),i(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=W,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?dt:pt,t.adler=2===e.wrap?0:1,e.last_flush=D,j._tr_init(e),
N):n(t,H)}function y(t){var e=w(t);return e===N&&b(t.state),e}function z(t,e){return t&&t.state?2!==t.state.wrap?H:(t.state.gzhead=e,N):H}function k(t,e,a,r,i,s){if(!t)return H;var h=1;if(e===M&&(e=6),0>r?(h=0,r=-r):r>15&&(h=2,r-=16),1>i||i>Y||a!==X||8>r||r>15||0>e||e>9||0>s||s>Q)return n(t,H);8===r&&(r=9);var l=new v;return t.state=l,l.strm=t,l.wrap=h,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=
~~((l.hash_bits+ht-1)/ht),l.window=new S.Buf8(2*l.w_size),l.head=new S.Buf16(l.hash_size),l.prev=new S.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new S.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=a,y(t)}function x(t,e){return k(t,e,X,Z,$,V)}function B(t,e){var a,h,_,d;if(!t||!t.state||e>L||0>e)return t?n(t,H):H;if(h=t.state,!t.output||!t.input&&0!==t.avail_in||h.status===mt&&e!==T)return n(t,0===
t.avail_out?K:H);if(h.strm=t,a=h.last_flush,h.last_flush=e,h.status===dt)if(2===h.wrap)t.adler=0,l(h,31),l(h,139),l(h,8),h.gzhead?(l(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),l(h,255&h.gzhead.time),l(h,h.gzhead.time>>8&255),l(h,h.gzhead.time>>16&255),l(h,h.gzhead.time>>24&255),l(h,9===h.level?2:h.strategy>=G||h.level<2?4:0),l(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(l(h,255&h.gzhead.extra.length),l(h,h.gzhead.extra.length>>
8&255)),h.gzhead.hcrc&&(t.adler=U(t.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=ut):(l(h,0),l(h,0),l(h,0),l(h,0),l(h,0),l(h,9===h.level?2:h.strategy>=G||h.level<2?4:0),l(h,zt),h.status=pt);else{var u=X+(h.w_bits-8<<4)<<8,f=-1;f=h.strategy>=G||h.level<2?0:h.level<6?1:6===h.level?2:3,u|=f<<6,0!==h.strstart&&(u|=_t),u+=31-u%31,h.status=pt,o(h,u),0!==h.strstart&&(o(h,t.adler>>>16),o(h,65535&t.adler)),t.adler=1}if(h.status===ut)if(h.gzhead.extra){for(_=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&
(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>_&&(t.adler=U(t.adler,h.pending_buf,h.pending-_,_)),s(t),_=h.pending,h.pending!==h.pending_buf_size));)l(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>_&&(t.adler=U(t.adler,h.pending_buf,h.pending-_,_)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=ft)}else h.status=ft;if(h.status===ft)if(h.gzhead.name){_=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>_&&(t.adler=U(t.adler,h.pending_buf,
h.pending-_,_)),s(t),_=h.pending,h.pending===h.pending_buf_size)){d=1;break}d=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,l(h,d)}while(0!==d);h.gzhead.hcrc&&h.pending>_&&(t.adler=U(t.adler,h.pending_buf,h.pending-_,_)),0===d&&(h.gzindex=0,h.status=ct)}else h.status=ct;if(h.status===ct)if(h.gzhead.comment){_=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>_&&(t.adler=U(t.adler,h.pending_buf,h.pending-_,_)),s(t),_=h.pending,h.pending===h.pending_buf_size)){d=
1;break}d=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,l(h,d)}while(0!==d);h.gzhead.hcrc&&h.pending>_&&(t.adler=U(t.adler,h.pending_buf,h.pending-_,_)),0===d&&(h.status=gt)}else h.status=gt;if(h.status===gt&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&s(t),h.pending+2<=h.pending_buf_size&&(l(h,255&t.adler),l(h,t.adler>>8&255),t.adler=0,h.status=pt)):h.status=pt),0!==h.pending){if(s(t),0===t.avail_out)return h.last_flush=-1,N}else if(0===t.avail_in&&r(e)<=r(a)&&
e!==T)return n(t,K);if(h.status===mt&&0!==t.avail_in)return n(t,K);if(0!==t.avail_in||0!==h.lookahead||e!==D&&h.status!==mt){var c=h.strategy===G?m(h,e):h.strategy===J?p(h,e):C[h.level].func(h,e);if((c===wt||c===yt)&&(h.status=mt),c===bt||c===wt)return 0===t.avail_out&&(h.last_flush=-1),N;if(c===vt&&(e===O?j._tr_align(h):e!==L&&(j._tr_stored_block(h,0,0,!1),e===q&&(i(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),s(t),0===t.avail_out))return h.last_flush=-1,N}return e!==T?N:
h.wrap<=0?R:(2===h.wrap?(l(h,255&t.adler),l(h,t.adler>>8&255),l(h,t.adler>>16&255),l(h,t.adler>>24&255),l(h,255&t.total_in),l(h,t.total_in>>8&255),l(h,t.total_in>>16&255),l(h,t.total_in>>24&255)):(o(h,t.adler>>>16),o(h,65535&t.adler)),s(t),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?N:R)}function A(t){var e;return t&&t.state?(e=t.state.status,e!==dt&&e!==ut&&e!==ft&&e!==ct&&e!==gt&&e!==pt&&e!==mt?n(t,H):(t.state=null,e===pt?n(t,F):N)):H}var C,S=t("../utils/common"),j=t("./trees"),E=t("./adler32"),U=
t("./crc32"),I=t("./messages"),D=0,O=1,q=3,T=4,L=5,N=0,R=1,H=-2,F=-3,K=-5,M=-1,P=1,G=2,J=3,Q=4,V=0,W=2,X=8,Y=9,Z=15,$=8,tt=29,et=256,at=et+1+tt,nt=30,rt=19,it=2*at+1,st=15,ht=3,lt=258,ot=lt+ht+1,_t=32,dt=42,ut=69,ft=73,ct=91,gt=103,pt=113,mt=666,bt=1,vt=2,wt=3,yt=4,zt=3,kt=function(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r};C=[new kt(0,0,0,0,f),new kt(4,4,8,4,c),new kt(4,5,16,8,c),new kt(4,6,32,32,c),new kt(4,4,16,16,g),new kt(8,16,32,32,g),new kt(8,
16,128,128,g),new kt(8,32,128,256,g),new kt(32,128,258,1024,g),new kt(32,258,258,4096,g)],a.deflateInit=x,a.deflateInit2=k,a.deflateReset=y,a.deflateResetKeep=w,a.deflateSetHeader=z,a.deflate=B,a.deflateEnd=A,a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(t,e,a){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error",
"-6":"incompatible version"}},{}],7:[function(t,e,a){function n(t){for(var e=t.length;--e>=0;)t[e]=0}function r(t){return 256>t?st[t]:st[256+(t>>>7)]}function i(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,a){t.bi_valid>Q-a?(t.bi_buf|=e<<t.bi_valid&65535,i(t,t.bi_buf),t.bi_buf=e>>Q-t.bi_valid,t.bi_valid+=a-Q):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function h(t,e,a){s(t,a[2*e],a[2*e+1])}function l(t,e){var a=0;do a|=1&t,t>>>=1,a<<=1;while(--e>0);
return a>>>1}function o(t){16===t.bi_valid?(i(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function _(t,e){var a,n,r,i,s,h,l=e.dyn_tree,o=e.max_code,_=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,c=e.stat_desc.max_length,g=0;for(i=0;J>=i;i++)t.bl_count[i]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;G>a;a++)n=t.heap[a],i=l[2*l[2*n+1]+1]+1,i>c&&(i=c,g++),l[2*n+1]=i,n>
o||(t.bl_count[i]++,s=0,n>=f&&(s=u[n-f]),h=l[2*n],t.opt_len+=h*(i+s),d&&(t.static_len+=h*(_[2*n+1]+s)));if(0!==g){do{for(i=c-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(i=c;0!==i;i--)for(n=t.bl_count[i];0!==n;)r=t.heap[--a],r>o||(l[2*r+1]!==i&&(t.opt_len+=(i-l[2*r+1])*l[2*r],l[2*r+1]=i),n--)}}function d(t,e,a){var n,r,i=new Array(J+1),s=0;for(n=1;J>=n;n++)i[n]=s=s+a[n-1]<<1;for(r=0;e>=r;r++){var h=t[2*r+1];0!==h&&(t[2*r]=l(i[h]++,h))}}function u(){var t,
e,a,n,r,i=new Array(J+1);for(a=0,n=0;H-1>n;n++)for(lt[n]=a,t=0;t<1<<$[n];t++)ht[a++]=n;for(ht[a-1]=n,r=0,n=0;16>n;n++)for(ot[n]=r,t=0;t<1<<tt[n];t++)st[r++]=n;for(r>>=7;M>n;n++)for(ot[n]=r<<7,t=0;t<1<<tt[n]-7;t++)st[256+r++]=n;for(e=0;J>=e;e++)i[e]=0;for(t=0;143>=t;)rt[2*t+1]=8,t++,i[8]++;for(;255>=t;)rt[2*t+1]=9,t++,i[9]++;for(;279>=t;)rt[2*t+1]=7,t++,i[7]++;for(;287>=t;)rt[2*t+1]=8,t++,i[8]++;for(d(rt,K+1,i),t=0;M>t;t++)it[2*t+1]=5,it[2*t]=l(t,5);_t=new ft(rt,$,F+1,K,J),dt=new ft(it,tt,0,M,J),ut=
new ft(new Array(0),et,0,P,V)}function f(t){var e;for(e=0;K>e;e++)t.dyn_ltree[2*e]=0;for(e=0;M>e;e++)t.dyn_dtree[2*e]=0;for(e=0;P>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*W]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function c(t){t.bi_valid>8?i(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function g(t,e,a,n){c(t),n&&(i(t,a),i(t,~a)),E.arraySet(t.pending_buf,t.window,e,a,t.pending),t.pending+=a}function p(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===
t[i]&&n[e]<=n[a]}function m(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&p(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!p(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n}function b(t,e,a){var n,i,l,o,_=0;if(0!==t.last_lit){do n=t.pending_buf[t.d_buf+2*_]<<8|t.pending_buf[t.d_buf+2*_+1],i=t.pending_buf[t.l_buf+_],_++,0===n?h(t,i,e):(l=ht[i],h(t,l+F+1,e),o=$[l],0!==o&&(i-=lt[l],s(t,i,o)),n--,l=r(n),h(t,l,a),o=tt[l],0!==o&&(n-=ot[l],s(t,n,o)));while(_<t.last_lit)}h(t,
W,e)}function v(t,e){var a,n,r,i=e.dyn_tree,s=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=G,a=0;l>a;a++)0!==i[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)r=t.heap[++t.heap_len]=2>o?++o:0,i[2*r]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=s[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)m(t,i,a);r=l;do a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],m(t,i,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=
n,i[2*r]=i[2*a]+i[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,i[2*a+1]=i[2*n+1]=r,t.heap[1]=r++,m(t,i,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],_(t,e),d(i,o,t.bl_count)}function w(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,o=4;for(0===s&&(l=138,o=3),e[2*(a+1)+1]=65535,n=0;a>=n;n++)r=s,s=e[2*(n+1)+1],++h<l&&r===s||(o>h?t.bl_tree[2*r]+=h:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[2*X]++):10>=h?t.bl_tree[2*Y]++:t.bl_tree[2*Z]++,h=0,i=r,0===s?(l=138,o=3):r===s?(l=6,o=3):(l=7,o=
4))}function y(t,e,a){var n,r,i=-1,l=e[1],o=0,_=7,d=4;for(0===l&&(_=138,d=3),n=0;a>=n;n++)if(r=l,l=e[2*(n+1)+1],!(++o<_&&r===l)){if(d>o){do h(t,r,t.bl_tree);while(0!==--o)}else 0!==r?(r!==i&&(h(t,r,t.bl_tree),o--),h(t,X,t.bl_tree),s(t,o-3,2)):10>=o?(h(t,Y,t.bl_tree),s(t,o-3,3)):(h(t,Z,t.bl_tree),s(t,o-11,7));o=0,i=r,0===l?(_=138,d=3):r===l?(_=6,d=3):(_=7,d=4)}}function z(t){var e;for(w(t,t.dyn_ltree,t.l_desc.max_code),w(t,t.dyn_dtree,t.d_desc.max_code),v(t,t.bl_desc),e=P-1;e>=3&&0===t.bl_tree[2*at[e]+
1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function k(t,e,a,n){var r;for(s(t,e-257,5),s(t,a-1,5),s(t,n-4,4),r=0;n>r;r++)s(t,t.bl_tree[2*at[r]+1],3);y(t,t.dyn_ltree,e-1),y(t,t.dyn_dtree,a-1)}function x(t){var e,a=4093624447;for(e=0;31>=e;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return I;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return D;for(e=32;F>e;e++)if(0!==t.dyn_ltree[2*e])return D;return I}function B(t){gt||(u(),gt=!0),t.l_desc=new ct(t.dyn_ltree,_t),t.d_desc=new ct(t.dyn_dtree,
dt),t.bl_desc=new ct(t.bl_tree,ut),t.bi_buf=0,t.bi_valid=0,f(t)}function A(t,e,a,n){s(t,(q<<1)+(n?1:0),3),g(t,e,a,!0)}function C(t){s(t,T<<1,3),h(t,W,rt),o(t)}function S(t,e,a,n){var r,i,h=0;t.level>0?(t.strm.data_type===O&&(t.strm.data_type=x(t)),v(t,t.l_desc),v(t,t.d_desc),h=z(t),r=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,r>=i&&(r=i)):r=i=a+5,r>=a+4&&-1!==e?A(t,e,a,n):t.strategy===U||i===r?(s(t,(T<<1)+(n?1:0),3),b(t,rt,it)):(s(t,(L<<1)+(n?1:0),3),k(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),
b(t,t.dyn_ltree,t.dyn_dtree)),f(t),n&&c(t)}function j(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(ht[a]+F+1)]++,t.dyn_dtree[2*r(e)]++),t.last_lit===t.lit_bufsize-1}var E=t("../utils/common"),U=4,I=0,D=1,O=2,q=0,T=1,L=2,N=3,R=258,H=29,F=256,K=F+1+H,M=30,P=19,G=2*K+1,J=15,Q=16,V=7,W=256,X=16,Y=17,Z=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,
2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],at=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=512,rt=new Array(2*(K+2));n(rt);var it=new Array(2*M);n(it);var st=new Array(nt);n(st);var ht=new Array(R-N+1);n(ht);var lt=new Array(H);n(lt);var ot=new Array(M);n(ot);var _t,dt,ut,ft=function(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=
t&&t.length},ct=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},gt=!1;a._tr_init=B,a._tr_stored_block=A,a._tr_flush_block=S,a._tr_tally=j,a._tr_align=C},{"../utils/common":1}],8:[function(t,e,a){function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},{}],"/lib/deflate.js":[function(t,e,a){function n(t,e){var a=new w(e);if(a.push(t,
!0),a.err)throw a.msg;return a.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}function i(t,e){return e=e||{},e.gzip=!0,n(t,e)}var s=t("./zlib/deflate.js"),h=t("./utils/common"),l=t("./utils/strings"),o=t("./zlib/messages"),_=t("./zlib/zstream"),d=Object.prototype.toString,u=0,f=4,c=0,g=1,p=2,m=-1,b=0,v=8,w=function(t){this.options=h.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:
e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==c)throw new Error(o[a]);e.header&&s.deflateSetHeader(this.strm,e.header)};w.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?f:u,"string"==typeof t?r.input=l.string2buf(t):"[object ArrayBuffer]"===
d.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new h.Buf8(i),r.next_out=0,r.avail_out=i),a=s.deflate(r,n),a!==g&&a!==c)return this.onEnd(a),this.ended=!0,!1;(0===r.avail_out||0===r.avail_in&&(n===f||n===p))&&this.onData("string"===this.options.to?l.buf2binstring(h.shrinkBuf(r.output,r.next_out)):h.shrinkBuf(r.output,r.next_out))}while((r.avail_in>0||0===r.avail_out)&&a!==g);return n===f?(a=s.deflateEnd(this.strm),this.onEnd(a),
this.ended=!0,a===c):n===p?(this.onEnd(c),r.avail_out=0,!0):!0},w.prototype.onData=function(t){this.chunks.push(t)},w.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=w,a.deflate=n,a.deflateRaw=r,a.gzip=i},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate.js":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")});
var TLTversion="5.0";if(window.TLT)throw"Attempting to recreate TLT. Library may be included more than once on the page.";var key_bkgt="";
var TLT=function(){function logScreenview(type,name,referrerName,root){var dcid=null,screenviewMsg=null,queue=TLT.getService("queue"),replay=TLT.getModule("replay"),webEvent=null,urlInfo=TLT.utils.getOriginAndPath();if(!name||typeof name!=="string")return;if(!referrerName||typeof referrerName!=="string")referrerName="";screenviewMsg={type:2,screenview:{type:type,name:name,url:urlInfo.path,host:urlInfo.origin,referrer:referrerName}};if(type==="LOAD")webEvent={type:"screenview_load",name:name};else if(type===
"UNLOAD")webEvent={type:"screenview_unload",name:name};if(webEvent&&replay)dcid=replay.onevent(webEvent);if(dcid)screenviewMsg.dcid=dcid;if(type==="LOAD"||type==="UNLOAD")queue.post("",screenviewMsg,"DEFAULT")}function addGeolocationMsg(position){var geolocationMsg,queue=TLT.getService("queue");if(!position||!position.coords)return;geolocationMsg={type:13,geolocation:{"lat":position.coords.latitude,"long":position.coords.longitude,"accuracy":Math.ceil(position.coords.accuracy)}};queue.post("",geolocationMsg,
"DEFAULT")}function addGeolocationErrorMsg(){var geolocationMsg,queue=TLT.getService("queue");geolocationMsg={type:13,geolocation:{"errorCode":201,"error":"Permission denied."}};queue.post("",geolocationMsg,"DEFAULT")}var tltStartTime=(new Date).getTime(),modules={},services={},initialized=false,state=null,isFrameBlacklisted=function(){var blacklistedFrames,checkedFrames=[];function prepareBlacklistedFrames(scope){var browserService=core.getService("browser"),blacklist=core.getCoreConfig().framesBlacklist,
foundFrames,i;blacklistedFrames=blacklistedFrames||[];scope=scope||null;if(typeof blacklist!=="undefined"&&blacklist.length>0){for(i=0;i<blacklist.length;i+=1){foundFrames=browserService.queryAll(blacklist[i],scope);if(foundFrames&&foundFrames.length>0)blacklistedFrames=blacklistedFrames.concat(foundFrames)}checkedFrames=checkedFrames.concat(browserService.queryAll("iframe",scope))}}function isFrameBlacklisted(iframe){if(core.utils.indexOf(checkedFrames,iframe)<0)prepareBlacklistedFrames(iframe.ownerDocument);
return core.utils.indexOf(blacklistedFrames,iframe)>-1}isFrameBlacklisted.clearCache=function(){blacklistedFrames=null};return isFrameBlacklisted}(),lastClickedElement=null,servicePassthroughs={"config":["getConfig","updateConfig","getCoreConfig","updateCoreConfig","getModuleConfig","updateModuleConfig","getServiceConfig","updateServiceConfig"],"queue":["post","setAutoFlush","flushAll"],"browserBase":["getXPathFromNode","processDOMEvent"]},loadUnloadHandler=function(){var status={};return{normalizeModuleEvents:function(moduleName,
moduleEvents,localTop,documentScope){var modStatus=status[moduleName],load=false,unload=false,browserService=core.getService("browser");localTop=localTop||core._getLocalTop();documentScope=documentScope||localTop.document;if(modStatus)return;status[moduleName]={loadFired:false,pageHideFired:false};core.utils.forEach(moduleEvents,function(eventConfig){switch(eventConfig.name){case "load":load=true;moduleEvents.push(core.utils.mixin(core.utils.mixin({},eventConfig),{name:"pageshow"}));break;case "unload":unload=
true;moduleEvents.push(core.utils.mixin(core.utils.mixin({},eventConfig),{name:"pagehide"}));moduleEvents.push(core.utils.mixin(core.utils.mixin({},eventConfig),{name:"beforeunload"}));break;case "change":if(core.utils.isLegacyIE&&core.getFlavor()==="w3c")moduleEvents.push(core.utils.mixin(core.utils.mixin({},eventConfig),{name:"propertychange"}));break}});if(!load&&!unload){delete status[moduleName];return}status[moduleName].silentLoad=!load;status[moduleName].silentUnload=!unload;if(!load)moduleEvents.push({name:"load",
target:localTop});if(!unload)moduleEvents.push({name:"unload",target:localTop})},canPublish:function(moduleName,event){var mod;if(status.hasOwnProperty(moduleName)===false)return true;mod=status[moduleName];switch(event.type){case "load":mod.pageHideFired=false;mod.loadFired=true;return!mod.silentLoad;case "pageshow":mod.pageHideFired=false;event.type="load";return!mod.loadFired&&!mod.silentLoad;case "pagehide":event.type="unload";mod.loadFired=false;mod.pageHideFired=true;return!mod.silentUnload;
case "unload":case "beforeunload":event.type="unload";mod.loadFired=false;return!mod.pageHideFired&&!mod.silentUnload}return true},isUnload:function(event){return typeof event==="object"?event.type==="unload"||event.type==="beforeunload"||event.type==="pagehide":false}}}(),events={},bridgeCallbacks={},_init=function(){},_callback=null,okToCallInit=true,inactivityTimerId=null,inactivityTimeoutHandler=function(){},core={getStartTime:function(){return tltStartTime},init:function(config,callback){if((window.location.href.indexOf("booking-gate.html#bookingChange")>
-1||window.location.href.indexOf("booking-gate.html#prime")>-1)&&sessionStorage["KE_STRGBOOKING_GATE"])window.key_bkgt=sessionStorage["KE_STRGBOOKING_GATE"];var timeoutCallback;_callback=callback;if(!okToCallInit)throw"init must only be called once!";okToCallInit=false;timeoutCallback=function(event){event=event||window.event||{};if(document.addEventListener||event.type==="load"||document.readyState==="complete"){if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",timeoutCallback,
false);window.removeEventListener("load",timeoutCallback,false)}else{document.detachEvent("onreadystatechange",timeoutCallback);window.detachEvent("onload",timeoutCallback)}_init(config,callback)}};if(document.readyState==="complete")setTimeout(timeoutCallback);else if(document.addEventListener){document.addEventListener("DOMContentLoaded",timeoutCallback,false);window.addEventListener("load",timeoutCallback,false)}else{document.attachEvent("onreadystatechange",timeoutCallback);window.attachEvent("onload",
timeoutCallback)}},isInitialized:function(){return initialized},getState:function(){return state},destroy:function(skipEvents){var token="",eventName="",target=null,serviceName=null,service=null,browser=null,delegateTarget=false;if(okToCallInit)return false;this.stopAll();if(!skipEvents){browser=this.getService("browser");for(token in events)if(events.hasOwnProperty(token)&&browser!==null){eventName=token.split("|")[0];target=events[token].target;delegateTarget=events[token].delegateTarget||undefined;
browser.unsubscribe(eventName,target,this._publishEvent,delegateTarget)}}for(serviceName in services)if(services.hasOwnProperty(serviceName)){service=services[serviceName].instance;if(service&&typeof service.destroy==="function")service.destroy();services[serviceName].instance=null}isFrameBlacklisted.clearCache();events={};initialized=false;okToCallInit=true;state="destroyed";if(typeof _callback==="function")try{_callback("destroyed")}catch(e){}},_updateModules:function(scope){var config=this.getCoreConfig(),
browser=this.getService("browser"),moduleConfig=null,moduleName=null;if(config&&browser&&config.modules)try{for(moduleName in config.modules)if(config.modules.hasOwnProperty(moduleName)){moduleConfig=config.modules[moduleName];if(modules.hasOwnProperty(moduleName)){if(moduleConfig.enabled===false){this.stop(moduleName);continue}this.start(moduleName);if(moduleConfig.events)this._registerModuleEvents(moduleName,moduleConfig.events,scope)}else if(browser.loadScript)browser.loadScript(config.moduleBase+
moduleName+".js")}this._registerModuleEvents.clearCache()}catch(e){core.destroy();return false}else return false;return true},rebind:function(scope){core._updateModules(scope)},getSessionData:function(){if(!core.isInitialized())return;var rv=null,sessionData=null,scName,scValue,config=core.getCoreConfig();if(!config||!config.sessionDataEnabled)return null;sessionData=config.sessionData||{};scName=sessionData.sessionQueryName;if(scName)scValue=core.utils.getQueryStringValue(scName,sessionData.sessionQueryDelim);
else{scName=sessionData.sessionCookieName||"TLTSID";scValue=core.utils.getCookieValue(scName)}if(scName&&scValue){rv=rv||{};rv.tltSCN=scName;rv.tltSCV=scValue;rv.tltSCVNeedsHashing=!!sessionData.sessionValueNeedsHashing}return rv},logGeolocation:function(position){var replayConfig=core.getModuleConfig("replay")||{},geolocationConfigOptions=core.utils.getValue(replayConfig,"geolocation.options",{timeout:3E4,enableHighAccuracy:true,maximumAge:0}),geolocationEnabled=core.utils.getValue(replayConfig,
"geolocation.enabled",false),navigator=window.navigator;if(!position){if(!geolocationEnabled||!navigator||!navigator.geolocation||!navigator.geolocation.getCurrentPosition)return;navigator.geolocation.getCurrentPosition(addGeolocationMsg,addGeolocationErrorMsg,geolocationConfigOptions)}else addGeolocationMsg(position)},logCustomEvent:function(name,customMsgObj){if(!core.isInitialized())return;var customMsg=null,queue=this.getService("queue");if(!name||typeof name!=="string")name="CUSTOM";customMsgObj=
customMsgObj||{};customMsg={type:5,customEvent:{name:name,data:customMsgObj}};queue.post("",customMsg,"DEFAULT")},logExceptionEvent:function(msg,url,line){if(!core.isInitialized())return;var exceptionMsg=null,queue=this.getService("queue");if(!msg||typeof msg!=="string")return;url=url||"";line=line||"";exceptionMsg={type:6,exception:{description:msg,url:url,line:line}};queue.post("",exceptionMsg,"DEFAULT")},logScreenviewLoad:function(name,referrerName,root){if(!core.isInitialized())return;logScreenview("LOAD",
name,referrerName,root)},logScreenviewUnload:function(name){if(!core.isInitialized())return;logScreenview("UNLOAD",name)},logDOMCapture:function(root,config){var dcid=null,domCaptureData,domCaptureService,msg,queue;if(!this.isInitialized())return dcid;if(core.utils.isLegacyIE)return dcid;domCaptureService=this.getService("domCapture");if(domCaptureService){root=root||window.document;config=config||{};domCaptureData=domCaptureService.captureDOM(root,config);if(domCaptureData){dcid=config.dcid||"dcid-"+
this.utils.getSerialNumber()+"."+(new Date).getTime();domCaptureData.dcid=dcid;domCaptureData.eventOn=!!config.eventOn;msg={"type":12,"domCapture":domCaptureData};queue=this.getService("queue");queue.post("",msg,"DEFAULT")}else dcid=null}return dcid},performDOMCapture:function(moduleName,root,config){return this.logDOMCapture(root,config)},_bridgeCallback:function(cbType){var callBackType=bridgeCallbacks[cbType];if(callBackType&&callBackType.enabled)return callBackType;return null},logScreenCapture:function(){if(!core.isInitialized())return;
var bridgeCallback=core._bridgeCallback("screenCapture");if(bridgeCallback!==null)bridgeCallback.cbFunction()},enableTealeafFramework:function(){if(!core.isInitialized())return;var bridgeCallback=core._bridgeCallback("enableTealeafFramework");if(bridgeCallback!==null)bridgeCallback.cbFunction()},disableTealeafFramework:function(){if(!core.isInitialized())return;var bridgeCallback=core._bridgeCallback("disableTealeafFramework");if(bridgeCallback!==null)bridgeCallback.cbFunction()},startNewTLFSession:function(){if(!core.isInitialized())return;
var bridgeCallback=core._bridgeCallback("startNewTLFSession");if(bridgeCallback!==null)bridgeCallback.cbFunction()},currentSessionId:function(){if(!core.isInitialized())return;var sessionId,bridgeCallback=core._bridgeCallback("currentSessionId");if(bridgeCallback!==null)sessionId=bridgeCallback.cbFunction();return sessionId},defaultValueForConfigurableItem:function(configItem){if(!core.isInitialized())return;var value,bridgeCallback=core._bridgeCallback("defaultValueForConfigurableItem");if(bridgeCallback!==
null)value=bridgeCallback.cbFunction(configItem);return value},valueForConfigurableItem:function(configItem){if(!core.isInitialized())return;var value,bridgeCallback=core._bridgeCallback("valueForConfigurableItem");if(bridgeCallback!==null)value=bridgeCallback.cbFunction(configItem);return value},setConfigurableItem:function(configItem,value){if(!core.isInitialized())return;var result=false,bridgeCallback=core._bridgeCallback("setConfigurableItem");if(bridgeCallback!==null)result=bridgeCallback.cbFunction(configItem,
value);return result},addAdditionalHttpHeader:function(key,value){if(!core.isInitialized())return;var result=false,bridgeCallback=core._bridgeCallback("addAdditionalHttpHeader");if(bridgeCallback!==null)result=bridgeCallback.cbFunction(key,value);return result},logCustomEventBridge:function(eventName,jsonData,logLevel){if(!core.isInitialized())return;var result=false,bridgeCallback=core._bridgeCallback("logCustomEventBridge");if(bridgeCallback!==null)result=bridgeCallback.cbFunction(eventName,jsonData,
logLevel);return result},registerBridgeCallbacks:function(callbacks){var i=0,len=0,cb=null;if(!callbacks)return false;if(callbacks.length===0){bridgeCallbacks={};return false}try{for(i=0,len=callbacks.length;i<len;i+=1){cb=callbacks[i];if(typeof cb==="object"&&cb.cbType&&cb.cbFunction)bridgeCallbacks[cb.cbType]={enabled:cb.enabled,cbFunction:cb.cbFunction}}}catch(e){return false}return true},redirectQueue:function(queue){var i,len,cb,retval,sS;if(!queue||!queue.length)return queue;cb=bridgeCallbacks.messageRedirect;
if(cb&&cb.enabled){sS=core.getService("serializer");for(i=0,len=queue.length;i<len;i+=1){retval=cb.cbFunction(sS.serialize(queue[i]),queue[i]);if(retval&&typeof retval==="object")queue[i]=retval;else{queue.splice(i,1);i-=1;len=queue.length}}}return queue},_hasSameOrigin:function(iframe){try{return iframe.document.location.host===document.location.host&&iframe.document.location.protocol===document.location.protocol}catch(e){}return false},provideRequestHeaders:function(){var headers=null,addHeadersCB=
bridgeCallbacks.addRequestHeaders;if(addHeadersCB&&addHeadersCB.enabled)headers=addHeadersCB.cbFunction();return headers},_registerModuleEvents:function(){var idCache,frameLoadPending=0,normalizeToObject=function(prop,localTop,documentScope){if(prop==="window")return localTop;if(prop==="document")return documentScope;return prop};function _registerModuleEventsOnScope(moduleName,moduleEvents,scope){var browserBase=core.getService("browserBase"),browser=core.getService("browser"),documentScope=core.utils.getDocument(scope),
localTop=core._getLocalTop(),isFrame=core.utils.isIFrameDescendant(scope),frameId,e,i;scope=scope||documentScope;loadUnloadHandler.normalizeModuleEvents(moduleName,moduleEvents,localTop,documentScope);if(isFrame){frameId=browserBase.ElementData.prototype.examineID(scope).id;if(typeof frameId==="string"){frameId=frameId.slice(0,frameId.length-1);for(e in events)if(events.hasOwnProperty(e))for(i=0;i<events[e].length;i+=1)if(moduleName===events[e][i])if(e.indexOf(frameId)!==-1){delete events[e];break}}}core.utils.forEach(moduleEvents,
function(eventConfig){var target=normalizeToObject(eventConfig.target,localTop,documentScope)||documentScope,delegateTarget=normalizeToObject(eventConfig.delegateTarget,localTop,documentScope),token="";if(eventConfig.recurseFrames!==true&&isFrame)return;if(typeof target==="string")if(eventConfig.delegateTarget&&core.getFlavor()==="jQuery"){token=core._buildToken4delegateTarget(eventConfig.name,target,eventConfig.delegateTarget);if(!events.hasOwnProperty(token)){events[token]=[moduleName];events[token].target=
target;events[token].delegateTarget=delegateTarget;browser.subscribe(eventConfig.name,target,core._publishEvent,delegateTarget,token)}else events[token].push(moduleName)}else core.utils.forEach(browser.queryAll(target,scope),function(element){var idData=idCache.get(element);if(!idData){idData=browserBase.ElementData.prototype.examineID(element);idCache.set(element,idData)}token=eventConfig.name+"|"+idData.id+idData.type;if(core.utils.indexOf(events[token],moduleName)!==-1)return;events[token]=events[token]||
[];events[token].push(moduleName);events[token].target=element;browser.subscribe(eventConfig.name,element,core._publishEvent)});else{token=core._buildToken4bubbleTarget(eventConfig.name,target,typeof eventConfig.target==="undefined");if(!events.hasOwnProperty(token)){events[token]=[moduleName];browser.subscribe(eventConfig.name,target,core._publishEvent)}else if(core.utils.indexOf(events[token],moduleName)===-1)events[token].push(moduleName)}if(token!=="")if(typeof target!=="string")events[token].target=
target})}function _isFrameLoaded(hIFrame){var iFrameWindow=core.utils.getIFrameWindow(hIFrame);return iFrameWindow!==null&&core._hasSameOrigin(iFrameWindow)&&iFrameWindow.document!==null&&iFrameWindow.document.readyState==="complete"}function registerModuleEvents(moduleName,moduleEvents,scope){scope=scope||core._getLocalTop().document;idCache=idCache||new core.utils.WeakMap;_registerModuleEventsOnScope(moduleName,moduleEvents,scope);if(moduleName!=="performance"){var hIFrame=null,hIFrameWindow=null,
browserService=core.getService("browser"),dcService=core.getService("domCapture"),cIFrames=browserService.queryAll("iframe, frame",scope),i,iLength;for(i=0,iLength=cIFrames.length;i<iLength;i+=1){hIFrame=cIFrames[i];if(isFrameBlacklisted(hIFrame))continue;if(_isFrameLoaded(hIFrame)){hIFrameWindow=core.utils.getIFrameWindow(hIFrame);core._registerModuleEvents(moduleName,moduleEvents,hIFrameWindow.document);dcService.observeWindow(hIFrameWindow);continue}frameLoadPending+=1;(function(moduleName,moduleEvents,
hIFrame){var hIFrameWindow=null,_iframeContext={moduleName:moduleName,moduleEvents:moduleEvents,hIFrame:hIFrame,_registerModuleEventsDelayed:function(){var hIFrameWindow=null;if(!isFrameBlacklisted(hIFrame)){hIFrameWindow=core.utils.getIFrameWindow(hIFrame);if(core._hasSameOrigin(hIFrameWindow)){core._registerModuleEvents(moduleName,moduleEvents,hIFrameWindow.document);dcService.observeWindow(hIFrameWindow)}}frameLoadPending-=1;if(!frameLoadPending)core._publishEvent({type:"loadWithFrames",custom:true})}};
core.utils.addEventListener(hIFrame,"load",function(){_iframeContext._registerModuleEventsDelayed()});if(core.utils.isLegacyIE&&_isFrameLoaded(hIFrame)){hIFrameWindow=core.utils.getIFrameWindow(hIFrame);core.utils.addEventListener(hIFrameWindow.document,"readystatechange",function(){_iframeContext._registerModuleEventsDelayed()})}})(moduleName,moduleEvents,hIFrame)}}}registerModuleEvents.clearCache=function(){if(idCache){idCache.clear();idCache=null}};return registerModuleEvents}(),_buildToken4currentTarget:function(event){var target=
event.nativeEvent?event.nativeEvent.currentTarget:null,idData=target?this.getService("browserBase").ElementData.prototype.examineID(target):{id:event.target?event.target.id:null,type:event.target?event.target.idType:-1};return event.type+"|"+idData.id+idData.type},_buildToken4delegateTarget:function(eventType,target,delegateTarget){return eventType+"|"+target+"|"+delegateTarget},_buildToken4bubbleTarget:function(eventType,target,checkIframe,delegateTarget){var localTop=core._getLocalTop(),localWindow,
browserService=core.getService("browser"),_getIframeElement=function(documentScope){var retVal=null;if(core._hasSameOrigin(localWindow.parent))core.utils.forEach(browserService.queryAll("iframe, frame",localWindow.parent.document),function(iframe){var iFrameWindow=null;if(!isFrameBlacklisted(iframe)){iFrameWindow=core.utils.getIFrameWindow(iframe);if(core._hasSameOrigin(iFrameWindow)&&iFrameWindow.document===documentScope)retVal=iframe}});return retVal},documentScope=core.utils.getDocument(target),
browserBase=this.getService("browserBase"),iframeElement=null,tmpTarget,retVal=eventType,idData;if(documentScope)localWindow=documentScope.defaultView||documentScope.parentWindow;if(target===window||target===window.window)retVal+="|null-2|window";else if(checkIframe&&localWindow&&core._hasSameOrigin(localWindow.parent)&&typeof documentScope!=="undefined"&&localTop.document!==documentScope){iframeElement=_getIframeElement(documentScope);if(iframeElement){tmpTarget=browserBase.ElementData.prototype.examineID(iframeElement);
retVal+="|"+tmpTarget.xPath+"-2"}}else if(delegateTarget&&delegateTarget!==document&&core.getFlavor()==="jQuery")retVal+="|null-2|"+core.utils.getTagName(target)+"|"+core.utils.getTagName(delegateTarget);else retVal+="|null-2|document";return retVal},_reinitConfig:function(){core._updateModules()},_publishEvent:function(event){var moduleName=null,module=null,token=event.delegateTarget&&event.data?event.data:core._buildToken4currentTarget(event),modules=null,i,len,target,modEvent=null,canIgnore=false,
canPublish=false,coreConfig=core.getCoreConfig(),browserService=core.getService("browser"),delegateTarget=event.delegateTarget||null;if(inactivityTimerId)clearTimeout(inactivityTimerId);inactivityTimerId=setTimeout(inactivityTimeoutHandler,core.utils.getValue(coreConfig,"inactivityTimeout",9E5));if((event.type==="load"||event.type==="pageshow")&&!event.nativeEvent.customLoad)return;if(core.utils.isIE){if(event.type==="click")lastClickedElement=event.target.element;if(event.type==="beforeunload"){canIgnore=
false;core.utils.forEach(coreConfig.ieExcludedLinks,function(selector){var i,len,el=browserService.queryAll(selector);for(i=0,len=el?el.length:0;i<len;i+=1)if(typeof el[i]!==undefined&&el[i]===lastClickedElement){canIgnore=true;return}if(selector&&lastClickedElement&&lastClickedElement.className&&lastClickedElement.className.indexOf("airport")>-1&&selector.indexOf("a.airport")>-1&&lastClickedElement.nodeName&&lastClickedElement.nodeName=="A"){canIgnore=true;return}});if(canIgnore)return}}if(loadUnloadHandler.isUnload(event))state=
"unloading";if(event.type==="change"&&core.utils.isLegacyIE&&core.getFlavor()==="w3c"&&(event.target.element.type==="checkbox"||event.target.element.type==="radio"))return;if(event.type==="propertychange")if(event.nativeEvent.propertyName==="checked"&&(event.target.element.type==="checkbox"||event.target.element.type==="radio"&&event.target.element.checked)){event.type="change";event.target.type="INPUT"}else return;if(!events.hasOwnProperty(token)){if(event.hasOwnProperty("nativeEvent"))target=event.nativeEvent.currentTarget||
event.nativeEvent.target;token=core._buildToken4bubbleTarget(event.type,target,true,delegateTarget)}if(events.hasOwnProperty(token)){modules=events[token];for(i=0,len=modules.length;i<len;i+=1){moduleName=modules[i];module=core.getModule(moduleName);modEvent=core.utils.mixin({},event);if(module&&core.isStarted(moduleName)&&typeof module.onevent==="function"){canPublish=loadUnloadHandler.canPublish(moduleName,modEvent);if(canPublish)module.onevent(modEvent)}}}if(modEvent&&modEvent.type==="unload"&&
canPublish)core.destroy()},_getLocalTop:function(){return window.window},addModule:function(moduleName,creator){modules[moduleName]={creator:creator,instance:null,context:null,messages:[]};if(this.isInitialized())this.start(moduleName)},getModule:function(moduleName){if(modules[moduleName]&&modules[moduleName].instance)return modules[moduleName].instance;return null},removeModule:function(moduleName){this.stop(moduleName);delete modules[moduleName]},isStarted:function(moduleName){return modules.hasOwnProperty(moduleName)&&
modules[moduleName].instance!==null},start:function(moduleName){var moduleData=modules[moduleName],instance=null;if(moduleData&&moduleData.instance===null){moduleData.context=new TLT.ModuleContext(moduleName,this);instance=moduleData.instance=moduleData.creator(moduleData.context);if(typeof instance.init==="function")instance.init()}},startAll:function(){var moduleName=null;for(moduleName in modules)if(modules.hasOwnProperty(moduleName))this.start(moduleName)},stop:function(moduleName){var moduleData=
modules[moduleName],instance=null;if(moduleData&&moduleData.instance!==null){instance=moduleData.instance;if(typeof instance.destroy==="function")instance.destroy();moduleData.instance=moduleData.context=null}},stopAll:function(){var moduleName=null;for(moduleName in modules)if(modules.hasOwnProperty(moduleName))this.stop(moduleName)},addService:function(serviceName,creator){services[serviceName]={creator:creator,instance:null}},getService:function(serviceName){if(services.hasOwnProperty(serviceName)){if(!services[serviceName].instance){try{services[serviceName].instance=
services[serviceName].creator(this);if(typeof services[serviceName].instance.init==="function")services[serviceName].instance.init()}catch(e){return null}if(typeof services[serviceName].instance.getServiceName!=="function")services[serviceName].instance.getServiceName=function(){return serviceName}}return services[serviceName].instance}return null},removeService:function(serviceName){delete services[serviceName]},broadcast:function(message){var i=0,len=0,prop=null,module=null;if(message&&typeof message===
"object")for(prop in modules)if(modules.hasOwnProperty(prop)){module=modules[prop];if(core.utils.indexOf(module.messages,message.type)>-1)if(typeof module.instance.onmessage==="function")module.instance.onmessage(message)}},listen:function(moduleName,messageType){var module=null;if(this.isStarted(moduleName)){module=modules[moduleName];if(core.utils.indexOf(module.messages,messageType)===-1)module.messages.push(messageType)}},fail:function(message,failcode,skipEvents){message="UIC FAILED. "+message;
try{core.destroy(!!skipEvents)}finally{core.utils.clog(message);throw new core.UICError(message,failcode);}},UICError:function(){function UICError(message,errorCode){this.message=message;this.code=errorCode}UICError.prototype=new Error;UICError.prototype.name="UICError";UICError.prototype.constructor=UICError;return UICError}(),getFlavor:function(){return"jQuery"}};inactivityTimeoutHandler=function(){core.utils.clog("UIC self-terminated due to inactivity timeout.");core.destroy()};_init=function(config,
callback){var configService,event,webEvent,baseBrowser,browserService,queueServiceConfig,ajaxService,queues,i;if(initialized){core.utils.clog("TLT.init() called more than once. Ignoring.");return}if(TLT&&TLT.replay)return;configService=core.getService("config");configService.updateConfig(config);if(!core._updateModules()){if(state!=="destroyed")core.destroy();return}if(configService.subscribe)configService.subscribe("configupdated",core._reinitConfig);initialized=true;state="loaded";event={type:"load",
target:window.window,srcElement:window.window,currentTarget:window.window,bubbles:true,cancelBubble:false,cancelable:true,timeStamp:+new Date,customLoad:true};baseBrowser=core.getService("browserBase");webEvent=new baseBrowser.WebEvent(event);core._publishEvent(webEvent);ajaxService=core.getService("ajax");queueServiceConfig=core.getServiceConfig("queue");queues=queueServiceConfig.queues;for(i=0;i<queues.length;i+=1)if(queues[i].checkEndpoint)ajaxService.sendRequest({oncomplete:function(){},timeout:queues[i].endpointCheckTimeout||
3E3,url:queues[i].endpoint,async:true,error:function(){core.setAutoFlush(false);core.destroy()}});if(typeof _callback==="function")try{_callback("initialized")}catch(e){}};(function(){var name=null,i,len;for(name in servicePassthroughs)if(servicePassthroughs.hasOwnProperty(name))for(i=0,len=servicePassthroughs[name].length;i<len;i+=1)(function(serviceName,methodName){core[methodName]=function(){var service=this.getService(serviceName);if(service)return service[methodName].apply(service,arguments)}})(name,
servicePassthroughs[name][i])})();return core}();
(function(){var ua=window.navigator.userAgent.toLowerCase(),_isIE=ua.indexOf("msie")!==-1||ua.indexOf("trident")!==-1,_isLegacyIE=function(){var isNavTimingSupported=!!window.performance;return _isIE&&(!isNavTimingSupported||document.documentMode<9)}(),_isAndroid=ua.indexOf("android")!==-1,_isiOS=/(ipad|iphone|ipod)/.test(ua),tltUniqueIndex=1,utils={isIE:_isIE,isLegacyIE:_isLegacyIE,isAndroid:_isAndroid,isLandscapeZeroDegrees:false,isiOS:_isiOS,isUndefOrNull:function(obj){return typeof obj==="undefined"||
obj===null},getSerialNumber:function(){var id;id=tltUniqueIndex;tltUniqueIndex+=1;return id},getRandomString:function(length,dataSet){var i,dataSetLength,defaultDataSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",randomString="";if(!length)return randomString;if(typeof dataSet!=="string")dataSet=defaultDataSet;for(i=0,dataSetLength=dataSet.length;i<length;i+=1)randomString+=dataSet.charAt(Math.floor(Math.random()*dataSetLength));return randomString},getValue:function(parentObj,
propertyAsStr,defaultValue){var i,len,properties;defaultValue=typeof defaultValue==="undefined"?null:defaultValue;if(!parentObj||typeof parentObj!=="object"||typeof propertyAsStr!=="string")return defaultValue;properties=propertyAsStr.split(".");for(i=0,len=properties.length;i<len;i+=1){if(this.isUndefOrNull(parentObj)||typeof parentObj[properties[i]]==="undefined")return defaultValue;parentObj=parentObj[properties[i]]}return parentObj},indexOf:function(array,item){var i,len;if(array&&array.indexOf)return array.indexOf(item);
if(array&&array instanceof Array)for(i=0,len=array.length;i<len;i+=1)if(array[i]===item)return i;return-1},forEach:function(array,callback,context){var i,len;if(!array||!array.length||!callback||!callback.call)return;for(i=0,len=array.length;i<len;i+=1)callback.call(context,array[i],i,array)},some:function(array,callback){var i,len,val=false;for(i=0,len=array.length;i<len;i+=1){val=callback(array[i],i,array);if(val)return val}return val},convertToArray:function(items){var i=0,len=items.length,result=
[];while(i<len){result.push(items[i]);i+=1}return result},mixin:function(dst){var prop,src,srcId,len;for(srcId=1,len=arguments.length;srcId<len;srcId+=1){src=arguments[srcId];for(prop in src)if(Object.prototype.hasOwnProperty.call(src,prop))dst[prop]=src[prop]}return dst},extend:function(deep,target,src){var prop="";for(prop in src)if(Object.prototype.hasOwnProperty.call(src,prop))if(deep&&Object.prototype.toString.call(src[prop])==="[object Object]"){if(typeof target[prop]==="undefined")target[prop]=
{};utils.extend(deep,target[prop],src[prop])}else target[prop]=src[prop];return target},clone:function(obj){var copy,attr;if(null===obj||"object"!==typeof obj)return obj;if(obj instanceof Object){copy=Object.prototype.toString.call(obj)==="[object Array]"?[]:{};for(attr in obj)if(Object.prototype.hasOwnProperty.call(obj,attr))copy[attr]=utils.clone(obj[attr]);return copy}},isEqual:function(a,b){var i,len;if(a===b)return true;if(typeof a!==typeof b)return false;if(a instanceof Object)if(Object.prototype.toString.call(a)===
"[object Array]"){if(a.length!==b.length)return false;for(i=0,len=a.length;i<len;i+=1)if(!this.isEqual(a[i],b[i]))return false;return true}return false},createObject:function(){var fn=null,F=null;if(typeof Object.create==="function")fn=Object.create;else{F=function(){};fn=function(o){if(typeof o!=="object"&&typeof o!=="function")throw new TypeError("Object prototype need to be an object!");F.prototype=o;return new F}}return fn}(),access:function(path,rootObj){var obj=rootObj||window,arr,i,len;if(typeof path!==
"string"||typeof obj!=="object"&&obj!==null)return;arr=path.split(".");for(i=0,len=arr.length;i<len;i+=1){if(i===0&&arr[i]==="window")continue;if(!Object.prototype.hasOwnProperty.call(obj,arr[i]))return;obj=obj[arr[i]];if(i<len-1&&!(obj instanceof Object))return}return obj},isNumeric:function(character){return!isNaN(character+1-1)},isUpperCase:function(character){return character===character.toUpperCase()&&character!==character.toLowerCase()},isLowerCase:function(character){return character===character.toLowerCase()&&
character!==character.toUpperCase()},getDocument:function(node){if(node&&node.nodeType!==9)return!utils.isUndefOrNull(node.ownerDocument)?node.ownerDocument:node.document;return node},getWindow:function(node){try{if(node.self!==node){var ownerDocument=utils.getDocument(node);return!utils.isUndefOrNull(ownerDocument.defaultView)?ownerDocument.defaultView:ownerDocument.parentWindow}}catch(e){node=null}return node},getOriginAndPath:function(location){var retObj={};location=location||window.location;
if(location.origin)retObj.origin=location.origin;else retObj.origin=(location.protocol||"")+"//"+(location.host||"");retObj.path=location.pathname||"";if(retObj.origin.indexOf("file://")>-1)retObj.path=retObj.path.replace(/(.*?)(?=\/[^.\/]*\.app)/g,"").replace(".app//",".app/");return retObj},getIFrameWindow:function(iFrameElement){var contentWindow=null;if(!iFrameElement)return contentWindow;try{contentWindow=iFrameElement.contentWindow||(iFrameElement.contentDocument?iFrameElement.contentDocument.parentWindow:
null)}catch(e){}return contentWindow},getTagName:function(node){var tagName="";if(node===document)tagName="document";else if(node===window||node===window.window)tagName="window";else if(typeof node==="string")tagName=node.toLowerCase();else if(!utils.isUndefOrNull(node))if(node.tagName)tagName=node.tagName.toLowerCase();else if(node.nodeName)tagName=node.nodeName.toLowerCase();else tagName="";return tagName},isIFrameDescendant:function(node){var nodeWindow=utils.getWindow(node);return nodeWindow?
nodeWindow!=TLT._getLocalTop():false},getOrientationMode:function(orientation){var mode="INVALID";if(typeof orientation!=="number")return mode;switch(orientation){case 0:case 180:case 360:mode="PORTRAIT";break;case 90:case -90:case 270:mode="LANDSCAPE";break;default:mode="UNKNOWN";break}return mode},clog:function(window){return function(){}}(window),trim:function(str){if(!str||!str.toString)return str;return str.toString().replace(/^\s+|\s+$/g,"")},ltrim:function(str){if(!str||!str.toString)return str;
return str.toString().replace(/^\s+/,"")},rtrim:function(str){if(!str||!str.toString)return str;return str.toString().replace(/\s+$/,"")},setCookie:function(cookieName,cookieValue,maxAge,path,domain){var i,len,domainArray,expiry,maxAgeStr="",pathStr;if(!cookieName)return;cookieName=encodeURIComponent(cookieName);cookieValue=encodeURIComponent(cookieValue);domainArray=(domain||location.hostname).split(".");pathStr=";path\x3d"+(path||"/");if(typeof maxAge==="number")if(this.isIE){expiry=new Date;expiry.setTime(expiry.getTime()+
maxAge*1E3);maxAgeStr=";expires\x3d"+expiry.toUTCString()}else maxAgeStr=";max-age\x3d"+maxAge;for(i=2,len=domainArray.length;i<=len;i+=1){document.cookie=cookieName+"\x3d"+cookieValue+";domain\x3d"+domainArray.slice(-i).join(".")+pathStr+maxAgeStr;if(this.getCookieValue(cookieName)===cookieValue)break}},getCookieValue:function(cookieName,cookieString){var i,len,cookie,cookies,cookieValue=null,cookieNameLen;try{cookieString=cookieString||document.cookie;if(!cookieName||!cookieName.toString)return null;
cookieName+="\x3d";cookieNameLen=cookieName.length;cookies=cookieString.split(";");for(i=0,len=cookies.length;i<len;i+=1){cookie=cookies[i];cookie=utils.ltrim(cookie);if(cookie.indexOf(cookieName)===0){cookieValue=cookie.substring(cookieNameLen,cookie.length);break}}}catch(e){cookieValue=null}return cookieValue},getQueryStringValue:function(paramName,queryDelim,queryString){var i,j,queryStringLen,paramValue=null,valueStartIndex;try{queryString=queryString||window.location.search;queryStringLen=queryString.length;
if(!paramName||!paramName.toString||!queryStringLen)return null;queryDelim=queryDelim||"\x26";queryString=queryDelim+queryString.substring(1);paramName=queryDelim+paramName+"\x3d";i=queryString.indexOf(paramName);if(i!==-1){valueStartIndex=i+paramName.length;j=queryString.indexOf(queryDelim,valueStartIndex);if(j===-1)j=queryStringLen;paramValue=decodeURIComponent(queryString.substring(valueStartIndex,j))}}catch(e){}return paramValue},addEventListener:function(){if(window.addEventListener)return function(element,
eventName,listener){element.addEventListener(eventName,listener,false)};return function(element,eventName,listener){element.attachEvent("on"+eventName,listener)}}(),matchTarget:function(rules,target){var i,j,matchIndex=-1,qr,qrLen,qrTarget,regex,len,rule;if(!rules||!target)return matchIndex;if(!this.browserService||!this.browserBaseService){this.browserService=TLT.getService("browser");this.browserBaseService=TLT.getService("browserBase")}for(i=0,len=rules.length;i<len&&matchIndex===-1;i+=1){rule=
rules[i];if(typeof rule==="string"){qr=this.browserService.queryAll(rule);for(j=0,qrLen=qr?qr.length:0;j<qrLen;j+=1)if(qr[j]){qrTarget=this.browserBaseService.ElementData.prototype.examineID(qr[j]);if(qrTarget.type===target.idType&&qrTarget.id===target.id){matchIndex=i;break}}}else if(rule&&rule.id&&rule.idType&&target.idType.toString()===rule.idType.toString())switch(typeof rule.id){case "string":if(rule.id===target.id)matchIndex=i;break;case "object":regex=new RegExp(rule.id.regex,rule.id.flags);
if(regex.test(target.id))matchIndex=i;break}}return matchIndex},WeakMap:function(){function index(data,key){var i,len;data=data||[];for(i=0,len=data.length;i<len;i+=1)if(data[i][0]===key)return i;return-1}return function(){var data=[];this.set=function(key,val){var idx=index(data,key);data[idx>-1?idx:data.length]=[key,val]};this.get=function(key){var arr=data[index(data,key)];return arr?arr[1]:undefined};this.clear=function(){data=[]};this.has=function(key){return index(data,key)>=0};this.remove=
function(key){var idx=index(data,key);if(idx>=0)data.splice(idx,1)};this["delete"]=this.remove}}()};if(typeof TLT==="undefined"||!TLT)window.TLT={};TLT.utils=utils})();
(function(){TLT.EventTarget=function(){this._handlers={}};TLT.EventTarget.prototype={constructor:TLT.EventTarget,publish:function(name,data){var i=0,len=0,handlers=this._handlers[name],event={type:name,data:data};if(typeof handlers!=="undefined")for(len=handlers.length;i<len;i+=1)handlers[i](event)},subscribe:function(name,handler){if(!this._handlers.hasOwnProperty(name))this._handlers[name]=[];this._handlers[name].push(handler)},unsubscribe:function(name,handler){var i=0,len=0,handlers=this._handlers[name];
if(handlers)for(len=handlers.length;i<len;i+=1)if(handlers[i]===handler){handlers.splice(i,1);return}}}})();
TLT.ModuleContext=function(){var methodsToExpose=["broadcast","getConfig:getModuleConfig","listen","post","getXPathFromNode","performDOMCapture","getStartTime"];return function(moduleName,core){var context={},i=0,len=methodsToExpose.length,parts=null,coreMethod=null,contextMethod=null;for(i=0;i<len;i+=1){parts=methodsToExpose[i].split(":");if(parts.length>1){contextMethod=parts[0];coreMethod=parts[1]}else{contextMethod=parts[0];coreMethod=parts[0]}context[contextMethod]=function(coreMethod){return function(){var args=
core.utils.convertToArray(arguments);args.unshift(moduleName);return core[coreMethod].apply(core,args)}}(coreMethod)}context.utils=core.utils;return context}}();
TLT.addService("config",function(core){function mergeConfig(oldConf,newConf){core.utils.extend(true,oldConf,newConf);configService.publish("configupdated",configService.getConfig())}var config={core:{},modules:{},services:{}},configService=core.utils.extend(false,core.utils.createObject(new TLT.EventTarget),{getConfig:function(){return config},updateConfig:function(newConf){mergeConfig(config,newConf)},getCoreConfig:function(){return config.core},updateCoreConfig:function(newConf){mergeConfig(config.core,
newConf)},getServiceConfig:function(serviceName){return config.services[serviceName]||null},updateServiceConfig:function(serviceName,newConf){if(typeof config.services[serviceName]==="undefined")config.services[serviceName]={};mergeConfig(config.services[serviceName],newConf)},getModuleConfig:function(moduleName){return config.modules[moduleName]||null},updateModuleConfig:function(moduleName,newConf){if(typeof config.modules[moduleName]==="undefined")config.modules[moduleName]={};mergeConfig(config.modules[moduleName],
newConf)},destroy:function(){config={core:{},modules:{},services:{}}}});return configService});
TLT.addService("queue",function(core){var CONFIG=null,aS=core.getService("ajax"),bS=core.getService("browser"),eS=core.getService("encoder"),sS=core.getService("serializer"),cS=core.getService("config"),mS=core.getService("message"),defaultQueue=null,queueTimers={},autoFlushing=true,isInitialized=false,queueManager=function(){var queues={};function queueExists(queueId){return typeof queues[queueId]!=="undefined"}function addQueue(queueId,opts){if(!queueExists(queueId))queues[queueId]={data:[],queueId:queueId,
url:opts.url,eventThreshold:opts.eventThreshold,sizeThreshold:opts.sizeThreshold||0,size:-1,serializer:opts.serializer,encoder:opts.encoder,crossDomainEnabled:!!opts.crossDomainEnabled,crossDomainIFrame:opts.crossDomainIFrame};return queues[queueId]}function removeQueue(queueId){if(queueExists(queueId))delete queues[queueId]}function getQueue(queueId){if(queueExists(queueId))return queues[queueId];return null}function clearQueue(queueId){var queue=getQueue(queueId);if(queue!==null)queue.data=[]}function flushQueue(queueId){var data=
null;if(queueExists(queueId)){data=getQueue(queueId).data;clearQueue(queueId)}return data}function pushToQueue(queueId,data){var queue=null,jsonStr=null,bridgeAndroid=window.tlBridge,bridgeiOS=window.iOSJSONShuttle;if(typeof bridgeAndroid!=="undefined"&&typeof bridgeAndroid.addMessage==="function"){jsonStr=sS.serialize(data);bridgeAndroid.addMessage(jsonStr)}else if(typeof bridgeiOS!=="undefined"&&typeof bridgeiOS==="function"){jsonStr=sS.serialize(data);bridgeiOS(jsonStr)}else if(queueExists(queueId)){queue=
getQueue(queueId);queue.data.push(data);queue.data=core.redirectQueue(queue.data);if(queue.sizeThreshold){jsonStr=sS.serialize(queue.data);queue.size=jsonStr.length}return queue.data.length}return 0}return{exists:queueExists,add:addQueue,remove:removeQueue,get:getQueue,clear:clearQueue,flush:flushQueue,push:pushToQueue}}();function handleXhrCallback(){}function getUrlPath(){return window.location.pathname}function addHeaderToQueue(queueId,headerName,headerValue,recurring){var queue=queueManager.get(queueId),
header={name:headerName,value:headerValue},qHeadersList=null;if(typeof headerName!=="string"||typeof headerValue!=="string")return;if(!queue.headers)queue.headers={once:[],always:[]};qHeadersList=!!recurring?queue.headers.always:queue.headers.once;qHeadersList.push(header)}function copyHeaders(queueId,headerObj){var i=0,len=0,queue=queueManager.get(queueId),qHeaders=queue.headers,headersList=null;headerObj=headerObj||{};function copy(l,o){var i=0,len=0,header=null;for(i=0,len=l.length;i<len;i+=1){header=
l[i];o[header.name]=header.value}}if(qHeaders){headersList=[qHeaders.always,qHeaders.once];for(i=0,len=headersList.length;i<len;i+=1)copy(headersList[i],headerObj)}return headerObj}function clearHeaders(queueId){var queue=null,qHeaders=null;if(!queueManager.exists(queueId))throw new Error("Queue: "+queueId+" does not exist!");queue=queueManager.get(queueId);qHeaders=queue?queue.headers:null;if(qHeaders)qHeaders.once=[]}function getExternalRequestHeaders(){var i=0,len,header,headers=core.provideRequestHeaders();
if(headers&&headers.length)for(i=0,len=headers.length;i<len;i+=1){header=headers[i];addHeaderToQueue("DEFAULT",header.name,header.value,header.recurring)}return i}function getMessageTypes(data){var i,len,types=[],typesString="";if(!data||!data.length)return typesString;for(i=0,len=data.length;i<len;i+=1)types[data[i].type]=true;for(i=0,len=types.length;i<len;i+=1)if(types[i]){if(typesString)typesString+=",";typesString+=i}return typesString}function flushQueue(queueId,sync){var data=queueManager.flush(queueId),
count=data!==null?data.length:0,queue=queueManager.get(queueId),httpHeaders={"Content-Type":"application/json","X-Tealeaf":"device (UIC) Lib/5.0.1.1707","X-TealeafType":"GUI","X-TeaLeaf-Page-Url":getUrlPath(),"KAL-TealeafJS-version":TLTversion},serializer=queue.serializer||"json",contentEncoder=queue.encoder,requestData,retObj,xdomainFrameWindow=null;if(!count)return;httpHeaders["X-Tealeaf-MessageTypes"]=getMessageTypes(data);data=mS.wrapMessages(data);if(serializer)data=sS.serialize(data,serializer);
if(contentEncoder){retObj=eS.encode(data,contentEncoder);if(retObj&&retObj.data&&!retObj.error){data=retObj.data;httpHeaders["Content-Encoding"]=retObj.encoding}}getExternalRequestHeaders();copyHeaders(queueId,httpHeaders);if(queue.crossDomainEnabled){xdomainFrameWindow=core.utils.getIFrameWindow(queue.crossDomainIFrame);if(!xdomainFrameWindow)return;requestData={request:{url:queue.url,async:!sync,headers:httpHeaders,data:data}};if(!core.utils.isIE&&typeof window.postMessage==="function")xdomainFrameWindow.postMessage(requestData,
queue.crossDomainIFrame.src);else try{xdomainFrameWindow.sendMessage(requestData)}catch(e){return}}else aS.sendRequest({oncomplete:handleXhrCallback,url:queue.url,async:!sync,headers:httpHeaders,data:data});clearHeaders(queueId)}function flushAll(sync){var conf=null,queues=CONFIG.queues,i=0;for(i=0;i<queues.length;i+=1){conf=queues[i];flushQueue(conf.qid,sync)}return true}function addToQueue(queueId,data){var length=queueManager.push(queueId,mS.createMessage(data)),queue=queueManager.get(queueId),
size=queue.size;if((length>=queue.eventThreshold||size>=queue.sizeThreshold)&&autoFlushing&&core.getState()!=="unloading")flushQueue(queueId)}function getQueueId(moduleName){var conf=null,queues=CONFIG.queues,module="",i=0,j=0;for(i=0;i<queues.length;i+=1){conf=queues[i];if(conf&&conf.modules)for(j=0;j<conf.modules.length;j+=1){module=conf.modules[j];if(module===moduleName)return conf.qid}}return defaultQueue.qid}function setTimer(qid,interval){queueTimers[qid]=window.setTimeout(function tick(){flushQueue(qid);
queueTimers[qid]=window.setTimeout(tick,interval)},interval)}function clearTimers(){var key=0;for(key in queueTimers)if(queueTimers.hasOwnProperty(key)){window.clearTimeout(queueTimers[key]);delete queueTimers[key]}queueTimers={}}function handleConfigUpdated(newConf){}function initQueueService(config){CONFIG=config;core.utils.forEach(CONFIG.queues,function(conf,i){var crossDomainIFrame=null;if(conf.qid==="DEFAULT")defaultQueue=conf;if(conf.crossDomainEnabled){crossDomainIFrame=bS.query(conf.crossDomainFrameSelector);
if(!crossDomainIFrame)core.fail("Cross domain iframe not found")}queueManager.add(conf.qid,{url:conf.endpoint,eventThreshold:conf.maxEvents,sizeThreshold:conf.maxSize||0,serializer:conf.serializer,encoder:conf.encoder,timerInterval:conf.timerInterval||0,crossDomainEnabled:conf.crossDomainEnabled||false,crossDomainIFrame:crossDomainIFrame});if(typeof conf.timerInterval!=="undefined"&&conf.timerInterval>0)setTimer(conf.qid,conf.timerInterval)});cS.subscribe("configupdated",handleConfigUpdated);isInitialized=
true}function destroy(){if(autoFlushing)flushAll(!CONFIG.asyncReqOnUnload);cS.unsubscribe("configupdated",handleConfigUpdated);clearTimers();CONFIG=null;defaultQueue=null;isInitialized=false}return{init:function(){if(!isInitialized)initQueueService(cS.getServiceConfig("queue")||{});else;},destroy:function(){destroy()},_getQueue:function(qid){return queueManager.get(qid).data},setAutoFlush:function(flag){if(flag===true)autoFlushing=true;else autoFlushing=false},flush:function(queueId){if(!queueManager.exists(queueId))throw new Error("Queue: "+
queueId+" does not exist!");flushQueue(queueId)},flushAll:function(sync){return flushAll(!!sync)},post:function(moduleName,queueEvent,queueId){queueId=queueId||getQueueId(moduleName);if(!queueManager.exists(queueId))throw new Error("Queue: "+queueId+" does not exist!");addToQueue(queueId,queueEvent)}}});
TLT.addService("browserBase",function(core){var customEventList,utils=core.utils,nonClickableTags={optgroup:true,option:true,nobr:true},queryDom={},configService=core.getService("config"),serializerService=null,config,blacklist,customid,getXPathFromNode,isInitialized=false;function updateConfig(){configService=core.getService("config");serializerService=core.getService("serializer");config=core.getService("config").getServiceConfig("browser")||{};blacklist=config.hasOwnProperty("blacklist")?config.blacklist:
[];customid=config.hasOwnProperty("customid")?config.customid:[]}function initBrowserBase(){updateConfig();configService.subscribe("configupdated",updateConfig);serializerService=core.getService("serializer");isInitialized=true}function destroy(){configService.unsubscribe("configupdated",updateConfig);isInitialized=false}function checkId(node){var i,len,re;if(!node||!node.id||typeof node.id!=="string")return false;for(i=0,len=blacklist.length;i<len;i+=1)if(typeof blacklist[i]==="string"){if(node.id===
blacklist[i])return false}else if(typeof blacklist[i]==="object"){re=new RegExp(blacklist[i].regex,blacklist[i].flags);if(re.test(node.id))return false}return true}function getEventType(event,target){var returnObj={type:null,subType:null},type;if(!event)return returnObj;type=event.type;switch(type){case "focusin":type="focus";break;case "focusout":type="blur";break;default:break}returnObj.type=type;return returnObj}function getElementType(element){var returnObj={type:null,subType:null};if(!element)return returnObj;
returnObj.type=utils.getTagName(element);returnObj.subType=element.type||null;return returnObj}function getNodeFromID(selector,type,scope){var idTypes={HTML_ID:"-1",XPATH_ID:"-2",ATTRIBUTE_ID:"-3"},doc,node=null,parts;if(!selector||!type)return node;doc=scope||window.document;type=type.toString();if(type===idTypes.HTML_ID)if(doc.getElementById)node=doc.getElementById(selector);else{if(doc.querySelector)node=doc.querySelector("#"+selector)}else if(type===idTypes.ATTRIBUTE_ID){parts=selector.split("\x3d");
if(doc.querySelector)node=doc.querySelector("["+parts[0]+'\x3d"'+parts[1]+'"]')}else if(type===idTypes.XPATH_ID)node=queryDom.xpath(selector,doc);return node}getXPathFromNode=function(){var specialChildNodes={"nobr":true,"p":true};function getXPathArrayFromNode(node,wantFullPath){var i,j,idValid=false,tmp_child=null,parent_window=null,parent_node=null,xpath=[],loop=true,localTop=core._getLocalTop(),tagName="";while(loop){loop=false;if(!utils.isUndefOrNull(node)){tagName=utils.getTagName(node);if(!utils.isUndefOrNull(tagName))if(specialChildNodes.hasOwnProperty(tagName)){node=
node.parentNode;tagName=utils.getTagName(node)}for(idValid=checkId(node);node!==document&&(!idValid||wantFullPath);idValid=checkId(node)){parent_node=node.parentNode;if(!parent_node){parent_window=core.utils.getWindow(node);if(!parent_window)return xpath;parent_node=parent_window!==localTop?parent_window.frameElement:document}tmp_child=parent_node.firstChild;if(typeof tmp_child==="undefined")return xpath;for(j=0;tmp_child;tmp_child=tmp_child.nextSibling)if(tmp_child.nodeType===1&&utils.getTagName(tmp_child)===
tagName){if(tmp_child===node){xpath[xpath.length]=[tagName,j];break}j+=1}node=parent_node;tagName=utils.getTagName(node)}if(idValid&&!wantFullPath){xpath[xpath.length]=[node.id];if(core.utils.isIFrameDescendant(node)){loop=true;node=core.utils.getWindow(node).frameElement}}}}return xpath}return function(node,wantFullPath){var xpath=getXPathArrayFromNode(node,!!wantFullPath),parts=[],i=xpath.length;if(i<1)return"null";while(i){i-=1;if(xpath[i].length>1)parts[parts.length]='["'+xpath[i][0]+'",'+xpath[i][1]+
"]";else parts[parts.length]="["+serializerService.serialize(xpath[i][0],"json")+"]"}return"["+parts.join(",")+"]"}}();function getDocScrollPosition(doc){var scrollPos={left:-1,top:-1},docElement;doc=doc||document;docElement=doc.documentElement||doc.body.parentNode||doc.body;scrollPos.left=typeof window.pageXOffset==="number"?window.pageXOffset:docElement.scrollLeft;scrollPos.top=typeof window.pageYOffset==="number"?window.pageYOffset:docElement.scrollTop;return scrollPos}function isJQueryEvent(event){return event&&
typeof event.originalEvent!=="undefined"&&typeof event.isDefaultPrevented!=="undefined"&&!event.isSimulated}function getEventDetails(event){if(!event)return null;if(event.type&&event.type.indexOf("touch")===0){if(isJQueryEvent(event))event=event.originalEvent;if(event.type==="touchstart")event=event.touches[event.touches.length-1];else if(event.type==="touchend")event=event.changedTouches[0]}return event}function normalizeEvent(event){var e=event||window.event,doc=document.documentElement,body=document.body,
found=false,foundElement=null,i=0;if(isJQueryEvent(e))e=e.originalEvent;if(typeof event==="undefined"||typeof e.target==="undefined"){e.target=e.srcElement||window.window;e.timeStamp=Number(new Date);if(e.pageX===null||typeof e.pageX==="undefined"){e.pageX=e.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);e.pageY=e.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}e.preventDefault=function(){this.returnValue=
false};e.stopPropagation=function(){this.cancelBubble=true}}if(window.chrome&&e.path!==undefined&&e.type==="click"){if(e.path.length===undefined)return e;for(i=0;i<e.path.length;i++)if(utils.getTagName(e.path[i])==="button"){found=true;foundElement=e.path[i];i=e.path.length}if(found)return{originalEvent:e,target:foundElement,srcElement:foundElement,type:e.type,pageX:document.body.scrollLeft+foundElement.getBoundingClientRect().left,pageY:document.body.scrollTop+foundElement.getBoundingClientRect().top}}return e}
function normalizeTarget(event){var itemSource=null;if(!event)return null;if(event.srcElement)itemSource=event.srcElement;else{itemSource=event.target;if(!itemSource)itemSource=event.explicitOriginalTarget;if(!itemSource)itemSource=event.originalTarget}if(!itemSource&&event.type.indexOf("touch")===0)itemSource=getEventDetails(event).target;while(itemSource&&nonClickableTags[utils.getTagName(itemSource)])itemSource=itemSource.parentNode;if(!itemSource&&event.srcElement===null)itemSource=window.window;
return itemSource}function getEventPosition(event){var posX=0,posY=0,doc=document.documentElement,body=document.body;event=getEventDetails(event);if(event)if(event.pageX||event.pageY){posX=event.pageX;posY=event.pageY}else if(event.clientX||event.clientY){posX=event.clientX+(doc?doc.scrollLeft:body?body.scrollLeft:0)-(doc?doc.clientLeft:body?body.clientLeft:0);posY=event.clientY+(doc?doc.scrollTop:body?body.scrollTop:0)-(doc?doc.clientTop:body?body.clientTop:0)}return{x:posX,y:posY}}queryDom.xpath=
function(query,scope){var xpath=null,elem,pathElem=null,tagName,i,j,k,len,jlen;if(!query)return null;xpath=serializerService.parse(query);scope=scope||document;elem=scope;if(!xpath)return null;for(i=0,len=xpath.length;i<len&&elem;i+=1){pathElem=xpath[i];if(pathElem.length===1)if(scope.getElementById)elem=scope.getElementById(pathElem[0]);else if(scope.querySelector)elem=scope.querySelector("#"+pathElem[0]);else elem=null;else{for(j=0,k=-1,jlen=elem.childNodes.length;j<jlen;j+=1)if(elem.childNodes[j].nodeType===
1&&utils.getTagName(elem.childNodes[j])===pathElem[0].toLowerCase()){k+=1;if(k===pathElem[1]){elem=elem.childNodes[j];break}}if(k===-1)return null}tagName=utils.getTagName(elem);if(tagName==="frame"||tagName==="iframe"){elem=utils.getIFrameWindow(elem).document;scope=elem}}return elem===scope||!elem?null:elem};function Point(x,y){this.x=x||0;this.y=y||0}function Size(width,height){this.width=width||0;this.height=height||0}function ElementData(event,target){var id,elementType,pos;target=normalizeTarget(event);
id=this.examineID(target);elementType=getElementType(target);pos=this.examinePosition(event,target);this.element=target;this.id=id.id;this.idType=id.type;this.type=elementType.type;this.subType=elementType.subType;this.state=this.examineState(target);this.position=new Point(pos.x,pos.y);this.size=new Size(pos.width,pos.height);this.xPath=id.xPath;this.name=id.name}ElementData.HTML_ID=-1;ElementData.XPATH_ID=-2;ElementData.ATTRIBUTE_ID=-3;ElementData.prototype.examineID=function(target){var id,type,
xPath,attribute_id,name,i=customid.length,attrib;try{xPath=getXPathFromNode(target)}catch(e){}name=target.name;try{if(!core.utils.getWindow(target)||!core.utils.isIFrameDescendant(target))if(checkId(target)){id=target.id;type=ElementData.HTML_ID}else if(customid.length&&target.attributes)while(i){i-=1;attrib=target.attributes[customid[i]];if(typeof attrib!=="undefined"){id=customid[i]+"\x3d"+(attrib.value||attrib);type=ElementData.ATTRIBUTE_ID}}}catch(e2){}if(!id){id=xPath;type=ElementData.XPATH_ID}return{id:id,
type:type,xPath:xPath,name:name}};ElementData.prototype.examineState=function(target){var tagnames={"a":["innerText","href"],"input":{"range":["maxValue:max","value"],"checkbox":["value","checked"],"radio":["value","checked"],"image":["src"]},"select":["value"],"button":["value","innerText"],"textarea":["value"]},tagName=utils.getTagName(target),properties=tagnames[tagName]||null,selectedOption=null,values=null,i=0,len=0,alias=null,key="";if(properties!==null){if(Object.prototype.toString.call(properties)===
"[object Object]")properties=properties[target.type]||["value"];values={};for(key in properties)if(properties.hasOwnProperty(key))if(properties[key].indexOf(":")!==-1){alias=properties[key].split(":");values[alias[0]]=target[alias[1]]}else if(properties[key]==="innerText")values[properties[key]]=core.utils.trim(target.innerText||target.textContent);else values[properties[key]]=target[properties[key]]}if(tagName==="select"&&target.options&&!isNaN(target.selectedIndex)){values.index=target.selectedIndex;
if(values.index>=0&&values.index<target.options.length){selectedOption=target.options[target.selectedIndex];values.value=selectedOption.getAttribute("value")||selectedOption.getAttribute("label")||selectedOption.text||selectedOption.innerText;values.text=selectedOption.text||selectedOption.innerText}}return values};function getZoomValue(){var factor=1,rect,physicalW,logicalW;if(document.body.getBoundingClientRect){try{rect=document.body.getBoundingClientRect()}catch(e){core.utils.clog("getBoundingClientRect failed.",
e);return factor}physicalW=rect.right-rect.left;logicalW=document.body.offsetWidth;factor=Math.round(physicalW/logicalW*100)/100}return factor}function getBoundingClientRectNormalized(element){var rect,rectangle,zoom,scrollPos;if(!element||!element.getBoundingClientRect)return{x:0,y:0,width:0,height:0};try{rect=element.getBoundingClientRect();scrollPos=getDocScrollPosition(document)}catch(e){core.utils.clog("getBoundingClientRect failed.",e);return{x:0,y:0,width:0,height:0}}rectangle={x:rect.left+
scrollPos.left,y:rect.top+scrollPos.top,width:rect.right-rect.left,height:rect.bottom-rect.top};if(core.utils.isIE){rectangle.x-=document.documentElement.clientLeft;rectangle.y-=document.documentElement.clientTop;zoom=getZoomValue();if(zoom!==1){rectangle.x=Math.round(rectangle.x/zoom);rectangle.y=Math.round(rectangle.y/zoom);rectangle.width=Math.round(rectangle.width/zoom);rectangle.height=Math.round(rectangle.height/zoom)}}return rectangle}ElementData.prototype.examinePosition=function(event,target){var posOnDoc=
getEventPosition(event),elPos=getBoundingClientRectNormalized(target);elPos.x=posOnDoc.x||posOnDoc.y?Math.round(Math.abs(posOnDoc.x-elPos.x)):elPos.width/2;elPos.y=posOnDoc.x||posOnDoc.y?Math.round(Math.abs(posOnDoc.y-elPos.y)):elPos.height/2;return elPos};function getNormalizedOrientation(){var orientation=typeof window.orientation==="number"?window.orientation:0;if(core.utils.isLandscapeZeroDegrees)if(Math.abs(orientation)===180||Math.abs(orientation)===0)orientation=90;else if(Math.abs(orientation)===
90)orientation=0;return orientation}function initCustomEventList(list){var i,len,coreConfig,event,modules,moduleName;if(list)return list;coreConfig=core.getCoreConfig()||{};modules=coreConfig.modules;list={};for(moduleName in modules)if(modules.hasOwnProperty(moduleName)&&modules[moduleName].events)for(i=0,len=modules[moduleName].events.length;i<len;i+=1){event=modules[moduleName].events[i];if(event.state)list[event.name]=event.state}return list}function getCustomState(event){var state;customEventList=
initCustomEventList(customEventList);if(customEventList[event.type])state=utils.getValue(event,customEventList[event.type],null);return state}function WebEvent(event){var pos,eventType,state;this.data=event.data||null;this.delegateTarget=event.delegateTarget||null;if(event.gesture||event.originalEvent&&event.originalEvent.gesture){this.gesture=event.gesture||event.originalEvent.gesture;this.gesture.idType=(new ElementData(this.gesture,this.gesture.target)).idType}event=normalizeEvent(event);pos=getEventPosition(event);
this.custom=false;this.nativeEvent=this.custom===true?null:event;this.position=new Point(pos.x,pos.y);this.target=new ElementData(event,event.target);this.orientation=getNormalizedOrientation();state=getCustomState(event);if(state)this.target.state=state;this.timestamp=(new Date).getTime();eventType=getEventType(event,this.target);this.type=eventType.type;this.subType=eventType.subType}function processDOMEvent(event){core._publishEvent(new WebEvent(event))}function getXpathListFromNode(node,wantFullPath){var i,
j,idValid=false,tmp_child=null,parent_window=null,parent_node=null,xpath=[],loop=true,localTop=core._getLocalTop(),tagName="";while(loop){loop=false;if(utils.isUndefOrNull(node))break;tagName=utils.getTagName(node);if(!utils.isUndefOrNull(tagName))if(getXpathListFromNode.specialChildNodes.hasOwnProperty(tagName)){node=node.parentNode;loop=true;continue}for(idValid=checkId(node);node!==document&&(!idValid||wantFullPath);idValid=checkId(node)){parent_node=node.parentNode;if(!parent_node){parent_window=
core.utils.getWindow(node);if(!parent_window||node.nodeType!==9){xpath.push([tagName,0]);break}parent_node=parent_window!==localTop?parent_window.frameElement:document}tmp_child=parent_node.firstChild;if(typeof tmp_child==="undefined")break;for(j=0;tmp_child;tmp_child=tmp_child.nextSibling)if(tmp_child.nodeType===1&&utils.getTagName(tmp_child)===tagName){if(tmp_child===node){xpath[xpath.length]=[tagName,j];break}j+=1}node=parent_node;tagName=utils.getTagName(node)}if(idValid&&!wantFullPath){xpath[xpath.length]=
[node.id];if(core.utils.isIFrameDescendant(node)){loop=true;node=core.utils.getWindow(node).frameElement}}}xpath.reverse();return xpath}getXpathListFromNode.specialChildNodes={"nobr":true,"p":true};function xpathListToString(list){var str;if(!list||!list.length)return null;str=serializerService.serialize(list,"json");return str}function Xpath(node){var fullXpath="",fullXpathList=[],xpath="",xpathList=[];if(!(this instanceof Xpath))return null;if(typeof node!=="object")return;xpathList=getXpathListFromNode(node,
false);if(xpathList.length&&xpathList[0].length===1)fullXpathList=getXpathListFromNode(node,true);else fullXpathList=utils.clone(xpathList);this.xpath=xpathListToString(xpathList);this.xpathList=xpathList;this.fullXpath=xpathListToString(fullXpathList);this.fullXpathList=fullXpathList;this.applyPrefix=function(prefix){var part,lastPrefixPart;if(!(prefix instanceof Xpath)||!prefix.fullXpathList.length)return;lastPrefixPart=prefix.fullXpathList[prefix.fullXpathList.length-1];part=this.fullXpathList.shift();
if(utils.isEqual(part[0],lastPrefixPart[0]))this.fullXpathList=prefix.fullXpathList.concat(this.fullXpathList);else{this.fullXpathList.unshift(part);return}this.fullXpath=xpathListToString(this.fullXpathList);part=this.xpathList.shift();if(part.length===1){this.xpathList.unshift(part);return}this.xpathList=prefix.xpathList.concat(this.xpathList);this.xpath=xpathListToString(this.xpathList)};this.compare=function(xpathB){if(!(xpathB instanceof Xpath))return 0;return this.fullXpathList.length-xpathB.fullXpathList.length};
this.isSame=function(xpathB){var isEqual=false;if(!(xpathB instanceof Xpath))return isEqual;if(this.compare(xpathB)===0)isEqual=this.fullXpath===xpathB.fullXpath;return isEqual};this.containedIn=function(parentXpath){var i,len;if(!(parentXpath instanceof Xpath))return false;if(parentXpath.fullXpathList.length>this.fullXpathList.length)return false;for(i=0,len=parentXpath.fullXpathList.length;i<len;i+=1)if(!utils.isEqual(parentXpath.fullXpathList[i],this.fullXpathList[i]))return false;return true}}
Xpath.prototype=function(){return{}}();return{init:function(){if(!isInitialized)initBrowserBase();else;},destroy:function(){destroy()},WebEvent:WebEvent,ElementData:ElementData,Xpath:Xpath,processDOMEvent:processDOMEvent,getNormalizedOrientation:getNormalizedOrientation,getXPathFromNode:function(moduleName,node,wantFullPath,wantObject){return getXPathFromNode(node,wantFullPath,wantObject)},getNodeFromID:getNodeFromID,queryDom:queryDom}});
TLT.addService("browser",function(core){var jQuery,queryDom,handlerMappings,errorCodes={JQUERY_NOT_SUPPORTED:"JQUERYNOTSUPPORTED",JQUERY_NOT_FOUND:"JQUERYNOTFOUND"},configService=core.getService("config"),base=core.getService("browserBase"),browser=configService.getServiceConfig("browser")||{},addEventListener=null,removeEventListener=null,isInitialized=false;function wrapWebEvent(handler){return function(event){var webEvent=new base.WebEvent(event);if(event.type==="resize"||event.type==="hashchange")setTimeout(function(){handler(webEvent)},
5);else handler(webEvent)}}function jQueryFnExists(object,property){if(typeof object[property]!=="function")core.fail("jQuery Object does not support "+property,errorCodes.JQUERY_NOT_SUPPORTED)}function verifyJQuery(){var wrapperFunctions=["on","off"],jQFunctions=["ajax","find","getScript"],jQVersion=typeof jQuery==="function"&&typeof jQuery.fn==="object"?jQuery.fn.jquery:0,jQVersionMajor=jQVersion!==0?parseInt(jQVersion.split(".")[0],10):0,jQVersionMinor=jQVersion!==0?parseInt(jQVersion.split(".")[1],
10):0,i,len=0,dummyWrapper=null;if(typeof jQuery!=="function")core.fail("jQuery not found.",errorCodes.JQUERY_NOT_FOUND);for(i=0,len=jQFunctions.length;i<len;i+=1)jQueryFnExists(jQuery,jQFunctions[i]);for(i=0,len=wrapperFunctions.length,dummyWrapper=jQuery({});i<len;i+=1)jQueryFnExists(dummyWrapper,wrapperFunctions[i]);if(!(jQVersionMajor>=2||jQVersionMajor===1&&jQVersionMinor>=7))core.fail("jQuery Object has the wrong version ("+jQVersion+")",errorCodes.JQUERY_NOT_SUPPORTED)}queryDom={list2Array:function(nodeList){var len=
nodeList.length,result=[],i;if(!nodeList)return result;if(typeof nodeList.length==="undefined")return[nodeList];for(i=0;i<len;i+=1)result[i]=nodeList[i];return result},find:function(query,scope,type){type=type||"css";return this.list2Array(this[type](query,scope))},css:function(query,scope){scope=scope||document;return jQuery(scope).find(query).get()}};handlerMappings=function(){var data=new core.utils.WeakMap;return{add:function(originalHandler){var handlers=data.get(originalHandler)||[wrapWebEvent(originalHandler),
0];handlers[1]+=1;data.set(originalHandler,handlers);return handlers[0]},find:function(originalHandler){var handlers=data.get(originalHandler);return handlers?handlers[0]:null},remove:function(originalHandler){var handlers=data.get(originalHandler);if(handlers){handlers[1]-=1;if(handlers[1]<=0)data.remove(originalHandler)}}}}();function initBrowserServiceJQuery(config){var useCapture=browser.useCapture===true;queryDom.xpath=base.queryDom.xpath;if(config.hasOwnProperty("jQueryObject"))jQuery=core.utils.access(config.jQueryObject);
else jQuery=window.jQuery;verifyJQuery();if(useCapture&&typeof document.addEventListener==="function"){addEventListener=function(target,eventName,handler){var _handler=function(e){handler(jQuery.event.fix(e))};target.addEventListener(eventName,_handler,useCapture)};removeEventListener=function(target,eventName,handler){var _handler=function(e){handler(jQuery.event.fix(e))};target.removeEventListener(eventName,_handler,useCapture)}}else{addEventListener=function(target,eventName,handler){jQuery(target).on(eventName,
handler)};removeEventListener=function(target,eventName,handler){jQuery(target).off(eventName,handler)}}isInitialized=true}return{init:function(){if(!isInitialized)initBrowserServiceJQuery(configService.getServiceConfig("browser")||{});else;},destroy:function(){isInitialized=false},getServiceName:function(){return"jQuery"},query:function(query,scope,type){try{return queryDom.find(query,scope,type)[0]||null}catch(err){return[]}},queryAll:function(query,scope,type){try{return queryDom.find(query,scope,
type)}catch(err){return[]}},loadScript:function(url){jQuery.getScript(url)},subscribe:function(eventName,target,handler,delegateTarget,data){var wrappedHandler=handlerMappings.add(handler);if(!delegateTarget)addEventListener(target,eventName,wrappedHandler);else jQuery(delegateTarget).on(eventName,target,data,wrappedHandler)},unsubscribe:function(eventName,target,handler,delegateTarget){var wrappedHandler=handlerMappings.find(handler);if(wrappedHandler){try{if(!delegateTarget)removeEventListener(target,
eventName,wrappedHandler);else jQuery(delegateTarget).off(eventName,target,wrappedHandler)}catch(e){}handlerMappings.remove(handler)}},getJQuery:function(){return jQuery}}});
TLT.addService("ajax",function(core){var makeAjaxCall,configService=core.getService("config"),browser=core.getService("browser"),jQuery,isInitialized=false;function extractResponseHeaders(headers){headers=headers.split("\n");var headersObj={},i=0,len=headers.length,header=null;for(i=0;i<len;i+=1){header=headers[i].split(": ");headersObj[header[0]]=header[1]}return headersObj}function wrapAjaxResponse(complete){return function ajaxResponseHandler(jqXhrError,status,jqXhrSuccess){var jqXhr=jqXhrError,
success=false;if(status==="success"){jqXhr=jqXhrSuccess||jqXhrError;success=true}complete({headers:extractResponseHeaders(jqXhr.getAllResponseHeaders()),responseText:jqXhr.responseText,statusCode:jqXhr.status,success:success})}}makeAjaxCall={init:function(message){var version=parseFloat(jQuery.fn.jquery);if(version<=1.7)this.init=makeAjaxCall["jQuery\x3c\x3d1.7"];else this.init=makeAjaxCall["jQuery\x3e\x3d1.8"];this.init(message)},"jQuery\x3c\x3d1.7":function(message){message.complete=wrapAjaxResponse(message.oncomplete);
delete message.oncomplete;jQuery.ajax(message)},"jQuery\x3e\x3d1.8":function(message){var oncomplete=wrapAjaxResponse(message.oncomplete),jqXhr;delete message.oncomplete;jqXhr=jQuery.ajax(message.url,message);jqXhr.always(oncomplete)}};function initAjaxService(config){if(config.hasOwnProperty("jQueryObject"))jQuery=core.utils.access(config.jQueryObject);else jQuery=window.jQuery;isInitialized=true}return{init:function(){if(!isInitialized)initAjaxService(configService.getServiceConfig("browser")||
{});else;},destroy:function(){isInitialized=false},sendRequest:function(message){message.type=message.type||"POST";message.processData=message.processData||false;makeAjaxCall.init(message)}}});
TLT.addService("domCapture",function(core){var configService=core.getService("config"),browserBaseService=core.getService("browserBase"),messageService,dcServiceConfig,dcDefaultOptions={captureFrames:false,removeScripts:true,removeComments:true},defaultDiffObserverConfig={childList:true,attributes:true,attributeOldValue:true,characterData:true,subtree:true},diffEnabled=typeof window.MutationObserver!=="undefined",diffObserver,diffObserverConfig=defaultDiffObserverConfig,observedWindowList=[],mutatedTargets=
[],mutatedAttrTargets=[],fullDOMSent=false,isInitialized=false,tltUniqueIDIndex=1,dupNode=function(){},getDOMCapture=function(){},updateConfig=function(){},utils=core.utils;function clearMutationRecords(){mutatedTargets=[];mutatedAttrTargets=[]}function consolidateTargets(mutatedTargets){var i,j,parentTarget;if(!mutatedTargets||!mutatedTargets.length)return;mutatedTargets=mutatedTargets.sort(function(xpathA,xpathB){return xpathA.compare(xpathB)});for(i=0;i<mutatedTargets.length;i+=1){parentTarget=
mutatedTargets[i];for(j=i+1;j<mutatedTargets.length;j+=0)if(mutatedTargets[j].containedIn(parentTarget))mutatedTargets.splice(j,1);else j+=1}}function removeOldAttrValues(attrList){var i,len;if(!attrList)return attrList;for(i=0,len=attrList.length;i<len;i+=1)delete attrList[i].oldValue;return attrList}function mergeAttributeChanges(currAttrList,newAttr){var i,len,attr,found;for(i=0,len=currAttrList.length,found=false;i<len;i+=1){attr=currAttrList[i];if(attr.name===newAttr.name){if(attr.oldValue===
newAttr.value)currAttrList.splice(i,1);else attr.value=newAttr.value;found=true;break}}if(!found)currAttrList.push(newAttr);return currAttrList}function addToMutatedTargets(xpath,mutationRecord){var i,j,k,len,found,target;xpath.removedNodes=mutationRecord.removedNodes.length;xpath.addedNodes=utils.convertToArray(mutationRecord.addedNodes);for(i=0,len=mutatedTargets.length;i<len;i+=1){target=mutatedTargets[i];if(xpath.isSame(target)){if(xpath.removedNodes)for(j=0;j<mutationRecord.removedNodes.length;j+=
1){k=target.addedNodes.indexOf(mutationRecord.removedNodes[j]);if(k!==-1){target.addedNodes.splice(k,1);xpath.removedNodes-=1}}target.removedNodes+=xpath.removedNodes;target.addedNodes.concat(xpath.addedNodes);if(!target.removedNodes&&!target.addedNodes.length)mutatedTargets.splice(i,1);found=true;break}}if(!found)mutatedTargets.push(xpath)}function isNodePartOfMutatedTargets(xpath,node){var i,j,len,found=false,mutatedNodes,target;for(i=0,len=mutatedTargets.length;!found&&i<len;i+=1){target=mutatedTargets[i];
if(xpath.containedIn(target)){mutatedNodes=target.addedNodes;for(j=0;j<mutatedNodes.length;j+=1)if(mutatedNodes[j].contains&&mutatedNodes[j].contains(node)){found=true;break}}}return found}function addToMutatedAttributeTargets(xpath,mutationRecord){var i,len,currAttributes,found,target;xpath.attributes=[{name:mutationRecord.attributeName,oldValue:mutationRecord.oldValue,value:mutationRecord.target.getAttribute(mutationRecord.attributeName)}];currAttributes=xpath.attributes[0];if(currAttributes.oldValue===
currAttributes.value)return;for(i=0,len=mutatedAttrTargets.length,found=false;i<len;i+=1){target=mutatedAttrTargets[i];if(xpath.isSame(target)){target.attributes=mergeAttributeChanges(target.attributes,currAttributes);if(!target.attributes.length)mutatedAttrTargets.splice(i,1);else if(isNodePartOfMutatedTargets(xpath,mutationRecord.target))mutatedAttrTargets.splice(i,1);found=true;break}}if(!found&&!isNodePartOfMutatedTargets(xpath,mutationRecord.target))mutatedAttrTargets.push(xpath)}function processMutationRecords(records){var i,
len,fullXpathList,record,xpath;if(!records||!records.length)return;for(i=0,len=records.length;i<len;i+=1){record=records[i];xpath=new browserBaseService.Xpath(record.target);if(xpath){fullXpathList=xpath.fullXpathList;if(fullXpathList.length&&fullXpathList[0][0]==="html")switch(record.type){case "characterData":case "childList":addToMutatedTargets(xpath,record);break;case "attributes":addToMutatedAttributeTargets(xpath,record);break;default:console.log("Unknown mutation type: "+record.type);break}}}}
function initDOMDiffObserver(){var observer;observer=new window.MutationObserver(function(records){if(records){processMutationRecords(records);utils.clog("Processed ["+records.length+"] mutation records.")}});return observer}function initDOMCaptureService(config){var i,len;configService.subscribe("configupdated",updateConfig);messageService=core.getService("message");dcServiceConfig=config;dcServiceConfig.options=utils.mixin({},dcDefaultOptions,dcServiceConfig.options);diffEnabled=diffEnabled&&utils.getValue(dcServiceConfig,
"diffEnabled",true);if(diffEnabled){diffObserverConfig=utils.getValue(dcServiceConfig,"diffObserverConfig",defaultDiffObserverConfig);diffObserver=initDOMDiffObserver();observedWindowList.push(window)}isInitialized=true}function destroyDOMCaptureService(){configService.unsubscribe("configupdated",updateConfig);if(diffObserver)diffObserver.disconnect();isInitialized=false}function getUniqueID(){var id;id="tlt-"+utils.getSerialNumber();return id}function removeTags(node,tagName){var i,nodeList;if(!node||
!node.getElementsByTagName||!tagName)return;nodeList=node.getElementsByTagName(tagName);if(nodeList&&nodeList.length)for(i=nodeList.length-1;i>=0;i-=1)nodeList[i].parentNode.removeChild(nodeList[i]);return node}function removeNodes(node,nodeType){var i,child;for(i=0;node.hasChildNodes()&&i<node.childNodes.length;i+=1){child=node.childNodes[i];if(child.nodeType===nodeType){node.removeChild(child);i-=1}else if(child.hasChildNodes())removeNodes(child,nodeType)}return node}function getDoctypeAsString(node){var doctype,
doctypeStr=null;if(!node||!node.doctype)return null;doctype=node.doctype;if(doctype)doctypeStr="\x3c!DOCTYPE "+doctype.name+(doctype.publicId?' PUBLIC "'+doctype.publicId+'"':"")+(!doctype.publicId&&doctype.systemId?" SYSTEM":"")+(doctype.systemId?' "'+doctype.systemId+'"':"")+"\x3e";return doctypeStr}function fixInputs(source,target){var i,targetElement,sourceElement,targetList,sourceList,len;if(!target)return;sourceList=source.getElementsByTagName("input");targetList=target.getElementsByTagName("input");
if(targetList)for(i=0,len=targetList.length;i<len;i+=1){targetElement=targetList[i];sourceElement=sourceList[i];switch(targetElement.type){case "checkbox":case "radio":if(sourceElement.checked)targetElement.setAttribute("checked","checked");else targetElement.removeAttribute("checked");break;default:targetElement.setAttribute("value",targetElement.value);break}}}function fixTextareas(source,target){var i,len,sourceTextareaElement,sourceTextareaList,targetTextareaElement,targetTextareaList;if(!source||
!source.getElementsByTagName||!target||!target.getElementsByTagName)return;sourceTextareaList=source.getElementsByTagName("textarea");targetTextareaList=target.getElementsByTagName("textarea");if(sourceTextareaList&&targetTextareaList)for(i=0,len=sourceTextareaList.length;i<len;i+=1){sourceTextareaElement=sourceTextareaList[i];targetTextareaElement=targetTextareaList[i];targetTextareaElement.setAttribute("value",sourceTextareaElement.value);targetTextareaElement.value=sourceTextareaElement.value}}
function fixSelectLists(source,target){var sourceElem,sourceList,targetElem,targetList,i,j,len;if(!source||!source.getElementsByTagName||!target||!target.getElementsByTagName)return;sourceList=source.getElementsByTagName("select");targetList=target.getElementsByTagName("select");if(sourceList)for(i=0,len=sourceList.length;i<len;i+=1){sourceElem=sourceList[i];targetElem=targetList[i];for(j=0;j<sourceElem.options.length;j+=1)if(j===sourceElem.selectedIndex||sourceElem.options[j].selected)targetElem.options[j].setAttribute("selected",
"selected");else targetElem.options[j].removeAttribute("selected")}}function getHTMLText(node){var nodeType,htmlText=null;if(node){nodeType=node.nodeType||-1;switch(nodeType){case 9:htmlText=node.documentElement.outerHTML;break;case 1:htmlText=node.outerHTML;break;default:htmlText=null;break}}return htmlText}function isNodeValidForCapture(node){var nodeType,valid=false;if(node&&typeof node==="object"){nodeType=node.nodeType||-1;switch(nodeType){case 9:case 1:valid=true;break;default:valid=false;break}}return valid}
function getFrames(source,target,options){var i,j,len,frameTag,frameTags=["iframe","frame"],sourceIframe,iframeWindow,iframeDoc,iframeCapture,iframeID,returnObject={frames:[]},sourceIframeList,targetIframeList;for(j=0;j<frameTags.length;j+=1){frameTag=frameTags[j];sourceIframeList=source.getElementsByTagName(frameTag);targetIframeList=target.getElementsByTagName(frameTag);if(sourceIframeList)for(i=0,len=sourceIframeList.length;i<len;i+=1)try{sourceIframe=sourceIframeList[i];iframeWindow=utils.getIFrameWindow(sourceIframe);
if(iframeWindow&&iframeWindow.document){iframeDoc=iframeWindow.document;iframeCapture=getDOMCapture(iframeDoc,iframeDoc,"",options);iframeID=getUniqueID();targetIframeList[i].setAttribute("tltid",iframeID);iframeCapture.tltid=iframeID;returnObject.frames=returnObject.frames.concat(iframeCapture.frames);delete iframeCapture.frames;returnObject.frames.push(iframeCapture)}}catch(e){}}return returnObject}function getCapturedLength(captureObj){var i,j,len,attrLen,attrRecord,diffRecord,totalLength=0;if(!captureObj)return totalLength;
if(captureObj.root){totalLength+=captureObj.root.length;if(captureObj.frames)for(i=0,len=captureObj.frames.length;i<len;i+=1)if(captureObj.frames[i].root)totalLength+=captureObj.frames[i].root.length}else if(captureObj.diffs)for(i=0,len=captureObj.diffs.length;i<len;i+=1){diffRecord=captureObj.diffs[i];totalLength+=diffRecord.xpath.length;if(diffRecord.root)totalLength+=diffRecord.root.length;else if(diffRecord.attributes)for(j=0,attrLen=diffRecord.attributes.length;j<attrLen;j+=1){attrRecord=diffRecord.attributes[j];
totalLength+=attrRecord.name.length;if(attrRecord.value)totalLength+=attrRecord.value.length}}return totalLength}function consolidateMutationsWithAttributeChanges(){var i,j,len,parentTarget;for(i=0,len=mutatedTargets.length;i<len&&mutatedAttrTargets.length;i+=1){parentTarget=mutatedTargets[i];for(j=0;j<mutatedAttrTargets.length;j+=1)if(mutatedAttrTargets[j].containedIn(parentTarget)){mutatedAttrTargets.splice(j,1);j-=1}}}function getDOMDiff(options){var i,len,returnObj={fullDOM:false,diffs:[]},dc,
diff,target,targetXpath;consolidateTargets(mutatedTargets);consolidateMutationsWithAttributeChanges();for(i=0,len=mutatedTargets.length;i<len;i+=1){targetXpath=mutatedTargets[i];target=browserBaseService.getNodeFromID(targetXpath.xpath,-2);dc=getDOMCapture(window.document,target,targetXpath,options);diff={xpath:targetXpath.xpath,root:dc.root};returnObj.diffs.push(diff)}for(i=0,len=mutatedAttrTargets.length;i<len;i+=1){targetXpath=mutatedAttrTargets[i];diff={xpath:targetXpath.xpath,attributes:removeOldAttrValues(targetXpath.attributes)};
returnObj.diffs.push(diff)}return returnObj}function getFullDOM(doc,options){var captureObj,urlInfo;captureObj=getDOMCapture(doc,doc,null,options);if(!captureObj)captureObj={};captureObj.charset=doc.characterSet||doc.charset;urlInfo=utils.getOriginAndPath(doc.location);captureObj.host=urlInfo.origin;captureObj.url=urlInfo.path;return captureObj}dupNode=function(node){var dup=null;if(isNodeValidForCapture(node)){if(location.pathname.indexOf("/booking/booking-gate.html")!=-1&&location.pathname.indexOf("/global")!=
-1)dup=node;else dup=node.cloneNode(true);if(!dup&&node.documentElement)if(location.pathname.indexOf("/booking/booking-gate.html")!=-1&&location.pathname.indexOf("/global")!=-1)dup=node.documentElement;else dup=node.documentElement.cloneNode(true)}return dup};getDOMCapture=function(doc,root,rootXpath,options){var rootCopy,frameCaptureObj,captureObj={},urlInfo;if(!doc||!root)return captureObj;rootCopy=dupNode(root,doc);if(!rootCopy)return captureObj;if(!!options.removeScripts){removeTags(rootCopy,
"script");removeTags(rootCopy,"noscript")}if(!!options.removeComments)removeNodes(rootCopy,8);fixSelectLists(root,rootCopy);fixInputs(root,rootCopy);fixTextareas(root,rootCopy);rootCopy=messageService.applyPrivacyToNode(rootCopy,rootXpath,doc);if(!!options.captureFrames)frameCaptureObj=getFrames(root,rootCopy,options);if(frameCaptureObj)captureObj=utils.mixin(captureObj,frameCaptureObj);captureObj.root=(getDoctypeAsString(root)||"")+getHTMLText(rootCopy);return captureObj};updateConfig=function(){configService=
core.getService("config");initDOMCaptureService(configService.getServiceConfig("domCapture")||{})};return{init:function(){configService=core.getService("config");if(!isInitialized)initDOMCaptureService(configService.getServiceConfig("domCapture")||{});else;},destroy:function(){destroyDOMCaptureService()},observeWindow:function(win){var i,len;if(!win)return;if(!utils.getValue(dcServiceConfig,"options.captureFrames",false)&&!(win===window))return;if(utils.indexOf(observedWindowList,win)===-1)observedWindowList.push(win)},
captureDOM:function(root,options){var i,len,captureObj=null,observedWindow,totalLength=0;if(!isInitialized||utils.isLegacyIE)return captureObj;options=utils.mixin({},dcServiceConfig.options,options);root=root||window.document;if(!fullDOMSent||!diffEnabled||options.forceFullDOM){if(diffObserver)diffObserver.disconnect();captureObj=getFullDOM(root,options);captureObj.fullDOM=true;fullDOMSent=true;if(diffObserver)for(i=0,len=observedWindowList.length;i<len;i+=1){observedWindow=observedWindowList[i];
diffObserver.observe(observedWindow.document,diffObserverConfig)}}else{captureObj=getDOMDiff(options);captureObj.fullDOM=false}clearMutationRecords();if(options.maxLength){totalLength=getCapturedLength(captureObj);if(totalLength>options.maxLength)captureObj={errorCode:101,error:"Captured length ("+totalLength+") exceeded limit ("+options.maxLength+")."}}return captureObj}}});
TLT.addService("encoder",function(core){var encoderServiceConfig={},configService=null,handleConfigUpdated=null,isInitialized=false;function getEncoder(type){var encoder=null;if(!type)return encoder;encoder=encoderServiceConfig[type];if(encoder&&typeof encoder.encode==="string")encoder.encode=core.utils.access(encoder.encode);return encoder}function initEncoderService(config){encoderServiceConfig=config;configService.subscribe("configupdated",handleConfigUpdated);isInitialized=true}function destroy(){configService.unsubscribe("configupdated",
handleConfigUpdated);isInitialized=false}handleConfigUpdated=function(){configService=core.getService("config");initEncoderService(configService.getServiceConfig("encoder")||{})};return{init:function(){configService=core.getService("config");if(!isInitialized)initEncoderService(configService.getServiceConfig("encoder")||{});else;},destroy:function(){destroy()},encode:function(data,type){var encoder,result,returnObj={data:null,encoding:null,error:null};if(typeof data!=="string"&&!data||!type){returnObj.error=
"Invalid "+(!data?"data":"type")+" parameter.";return returnObj}encoder=getEncoder(type);if(!encoder){returnObj.error="Specified encoder ("+type+") not found.";return returnObj}if(typeof encoder.encode!=="function"){returnObj.error="Configured encoder ("+type+") encode method is not a function.";return returnObj}result=encoder.encode(data);if(!result||core.utils.getValue(result,"buffer",null)===null){returnObj.error="Encoder ("+type+") returned an invalid result.";return returnObj}returnObj.data=
result.buffer;returnObj.encoding=encoder.defaultEncoding;return returnObj}}});
TLT.addService("message",function(core){var utils=core.utils,prevScreenviewOffsetTime=0,screenviewOffsetTime=0,count=0,messageCount=0,sessionStart=new Date,tlStartLoad=new Date,browserBaseService=core.getService("browserBase"),browserService=core.getService("browser"),configService=core.getService("config"),config=configService.getServiceConfig("message")||{},windowHref=window.location.href,pageId="ID"+tlStartLoad.getHours()+"H"+tlStartLoad.getMinutes()+"M"+tlStartLoad.getSeconds()+"S"+tlStartLoad.getMilliseconds()+
"R"+Math.random(),privacy=config.hasOwnProperty("privacy")?config.privacy:[],privacyMasks={},maskingCharacters={lower:"x",upper:"X",numeric:"9",symbol:"@"},isApple=utils.isiOS,isAndroidChrome=navigator.userAgent.indexOf("Chrome")>-1&&utils.isAndroid,devicePixelRatio=window.devicePixelRatio||1,screen=window.screen||{},screenWidth=screen.width||0,screenHeight=screen.height||0,deviceOrientation=browserBaseService.getNormalizedOrientation(),deviceWidth=!isApple?screenWidth:Math.abs(deviceOrientation)===
90?screenHeight:screenWidth,deviceHeight=!isApple?screenHeight:Math.abs(deviceOrientation)===90?screenWidth:screenHeight,deviceToolbarHeight=window.screen?window.screen.height-window.screen.availHeight:0,startWidth=window.innerWidth||document.documentElement.clientWidth,startHeight=window.innerHeight||document.documentElement.clientHeight,isInitialized=false;function Message(event){var key="",timestamp=event.timestamp||(new Date).getTime();delete event.timestamp;this.type=event.type;this.offset=timestamp-
sessionStart.getTime();if(event.type===2||!screenviewOffsetTime){prevScreenviewOffsetTime=screenviewOffsetTime;screenviewOffsetTime=timestamp}this.screenviewOffset=timestamp-(timestamp>=screenviewOffsetTime?screenviewOffsetTime:prevScreenviewOffsetTime);this.count=messageCount+=1;this.fromWeb=true;for(key in event)if(event.hasOwnProperty(key))this[key]=event[key]}privacyMasks.PVC_MASK_EMPTY=function(value){return""};privacyMasks.PVC_MASK_BASIC=function(value){var retMask="XXXXX";if(typeof value!==
"string")return"";return value.length?retMask:""};privacyMasks.PVC_MASK_TYPE=function(value){var characters,i=0,len=0,retMask="";if(typeof value!=="string")return retMask;characters=value.split("");for(i=0,len=characters.length;i<len;i+=1)if(utils.isNumeric(characters[i]))retMask+=maskingCharacters.numeric;else if(utils.isUpperCase(characters[i]))retMask+=maskingCharacters.upper;else if(utils.isLowerCase(characters[i]))retMask+=maskingCharacters.lower;else retMask+=maskingCharacters.symbol;return retMask};
privacyMasks.PVC_MASK_EMPTY.maskType=1;privacyMasks.PVC_MASK_BASIC.maskType=2;privacyMasks.PVC_MASK_TYPE.maskType=3;privacyMasks.PVC_MASK_CUSTOM={maskType:4};function maskStr(mask,str){var filter=privacyMasks.PVC_MASK_BASIC;if(typeof str!=="string")return str;if(!mask)filter=privacyMasks.PVC_MASK_BASIC;else if(mask.maskType===privacyMasks.PVC_MASK_EMPTY.maskType)filter=privacyMasks.PVC_MASK_EMPTY;else if(mask.maskType===privacyMasks.PVC_MASK_BASIC.maskType)filter=privacyMasks.PVC_MASK_BASIC;else if(mask.maskType===
privacyMasks.PVC_MASK_TYPE.maskType)filter=privacyMasks.PVC_MASK_TYPE;else if(mask.maskType===privacyMasks.PVC_MASK_CUSTOM.maskType){if(typeof mask.maskFunction==="string")filter=utils.access(mask.maskFunction);else filter=mask.maskFunction;if(typeof filter!=="function")filter=privacyMasks.PVC_MASK_BASIC}return filter(str)}function applyMask(mask,message){var target;if(!message||!message.target)return;target=message.target;if(!utils.isUndefOrNull(target.prevState)&&target.prevState.hasOwnProperty("value"))target.prevState.value=
maskStr(mask,target.prevState.value);if(!utils.isUndefOrNull(target.currState)&&target.currState.hasOwnProperty("value"))target.currState.value=maskStr(mask,target.currState.value)}function matchesTarget(targets,target){var i,j,element,qr,qrLen,qrTarget,regex,len,tmpTarget;if(!targets||!target||!target.id)return false;for(i=0,len=targets.length;i<len;i+=1){tmpTarget=targets[i];if(typeof tmpTarget==="string"){qr=browserService.queryAll(tmpTarget);for(j=0,qrLen=qr?qr.length:0;j<qrLen;j+=1)if(qr[j]){qrTarget=
browserBaseService.ElementData.prototype.examineID(qr[j]);if(qrTarget.type===target.idType&&qrTarget.id===target.id)return true}}else if(tmpTarget&&tmpTarget.id&&tmpTarget.idType&&target.idType===tmpTarget.idType)switch(typeof tmpTarget.id){case "string":if(tmpTarget.id===target.id)return true;break;case "object":regex=new RegExp(tmpTarget.id.regex,tmpTarget.id.flags);if(regex.test(target.id))return true;break}}return false}function privacyFilter(message){var i,len,mask;if(!message||!message.hasOwnProperty("target"))return message;
for(i=0,len=privacy.length;i<len;i+=1){mask=privacy[i];if(matchesTarget(mask.targets,message.target)){applyMask(mask,message);break}}return message}function applyPrivacyToDocument(doc){var i,j,k,element,len,mask,qr,qrLen,target,targets,targetsLen;if(!doc)return doc;for(i=0,len=privacy.length;i<len;i+=1){mask=privacy[i];targets=mask.targets;for(j=0,targetsLen=targets.length;j<targetsLen;j+=1){target=targets[j];if(typeof target==="string"){qr=browserService.queryAll(target,doc);for(k=0,qrLen=qr.length;k<
qrLen;k+=1){element=qr[k];if(element.value)element.setAttribute("value",maskStr(mask,element.value))}}else if(typeof target.id==="string"){element=browserBaseService.getNodeFromID(target.id,target.idType,doc);if(element&&element.value)element.setAttribute("value",maskStr(mask,element.value))}}}return doc}function applyRegexAndXpathPrivacyRules(regexAndXpathRules,root,rootXpath,doc){var i,j,len,element,elementInfo,elements=[],elementXpath,maskedValue,rule,target,qr;if(!regexAndXpathRules.length)return;
qr=browserService.queryAll("input, select, textarea",root);if(!qr||!qr.length)return;for(i=0,len=qr.length;i<len;i+=1)if(qr[i].value){elementInfo=browserBaseService.ElementData.prototype.examineID(qr[i]);if(elementInfo.type===-2){elementXpath=new browserBaseService.Xpath(qr[i]);elementXpath.applyPrefix(rootXpath);elementInfo.id=elementXpath.xpath}elements.push({id:elementInfo.id,idType:elementInfo.type,element:qr[i]})}for(i=0,len=regexAndXpathRules.length;i<len;i+=1){rule=privacy[regexAndXpathRules[i].ruleIndex];
target=rule.targets[regexAndXpathRules[i].targetIndex];if(typeof target.id==="string"&&target.idType===-2)for(j=0;j<elements.length;j+=1){if(elements[j].idType===target.idType&&elements[j].id===target.id){element=elements[j].element;maskedValue=maskStr(rule,element.value);element.setAttribute("value",maskedValue);element.value=maskedValue}}else for(j=0;j<elements.length;j+=1)if(elements[j].idType===target.idType&&target.regex.test(elements[j].id)){element=elements[j].element;maskedValue=maskStr(rule,
element.value);element.setAttribute("value",maskedValue);element.value=maskedValue}}}function applyPrivacyToNode(root,rootXpath,doc){var i,j,k,element,len,mask,maskedValue,qr,qrLen,regexAndXpathRules=[],target,targets,targetsLen;if(!root||!doc)return null;for(i=0,len=privacy.length;i<len;i+=1){mask=privacy[i];targets=mask.targets;for(j=0,targetsLen=targets.length;j<targetsLen;j+=1){target=targets[j];if(typeof target==="string"){qr=browserService.queryAll(target,root);for(k=0,qrLen=qr.length;k<qrLen;k+=
1){element=qr[k];if(element.value){maskedValue=maskStr(mask,element.value);element.setAttribute("value",maskedValue);element.value=maskedValue}}}else if(typeof target.id==="string")switch(target.idType){case -1:case -3:element=browserBaseService.getNodeFromID(target.id,target.idType,root);if(element&&element.value){maskedValue=maskStr(mask,element.value);element.setAttribute("value",maskedValue);element.value=maskedValue}break;case -2:regexAndXpathRules.push({ruleIndex:i,targetIndex:j});break;default:break}else regexAndXpathRules.push({ruleIndex:i,
targetIndex:j})}}applyRegexAndXpathPrivacyRules(regexAndXpathRules,root,rootXpath,doc);return root}function updateConfig(){var i,j,rule,rulesLen,target,targets,targetsLen;configService=core.getService("config");config=configService.getServiceConfig("message")||{};privacy=config.hasOwnProperty("privacy")?config.privacy:[];for(i=0,rulesLen=privacy.length;i<rulesLen;i+=1){rule=privacy[i];targets=rule.targets;for(j=0,targetsLen=targets.length;j<targetsLen;j+=1){target=targets[j];if(typeof target==="object"){if(typeof target.idType===
"string")target.idType=+target.idType;if(typeof target.id==="object")target.regex=new RegExp(target.id.regex,target.id.flags)}}}}function initMessageService(){if(configService.subscribe)configService.subscribe("configupdated",updateConfig);updateConfig();isInitialized=true}function destroy(){configService.unsubscribe("configupdated",updateConfig);isInitialized=false}return{init:function(){if(!isInitialized)initMessageService();else;},destroy:function(){destroy()},applyPrivacyToDocument:applyPrivacyToDocument,
applyPrivacyToNode:applyPrivacyToNode,createMessage:function(event){if(typeof event.type==="undefined")throw new TypeError("Invalid queueEvent given!");return privacyFilter(new Message(event))},wrapMessages:function(messages){var messagePackage={messageVersion:"6.0.0.0",serialNumber:count+=1,sessions:[{id:pageId,startTime:tlStartLoad.getTime(),timezoneOffset:tlStartLoad.getTimezoneOffset(),messages:messages,clientEnvironment:{webEnvironment:{libVersion:"5.0.1.1707",page:windowHref,referrer:document.referrer,
screen:{devicePixelRatio:devicePixelRatio,deviceWidth:deviceWidth,deviceHeight:deviceHeight,deviceToolbarHeight:deviceToolbarHeight,width:startWidth,height:startHeight,orientation:deviceOrientation}}}}]},webEnvScreen=messagePackage.sessions[0].clientEnvironment.webEnvironment.screen;webEnvScreen.orientationMode=utils.getOrientationMode(webEnvScreen.orientation);return messagePackage}}});
TLT.addService("serializer",function(core){function serializeToJSON(obj){var str,key,len=0;if(typeof obj!=="object"||obj===null)switch(typeof obj){case "function":case "undefined":return"null";case "string":return'"'+obj.replace(/\"/g,'\\"')+'"';default:return String(obj)}else if(Object.prototype.toString.call(obj)==="[object Array]"){str="[";for(key=0,len=obj.length;key<len;key+=1)if(Object.prototype.hasOwnProperty.call(obj,key))str+=serializeToJSON(obj[key])+","}else{str="{";for(key in obj)if(Object.prototype.hasOwnProperty.call(obj,
key)){str=str.concat('"',key,'":',serializeToJSON(obj[key]),",");len+=1}}if(len>0)str=str.substring(0,str.length-1);str+=String.fromCharCode(str.charCodeAt(0)+2);return str}var configService=core.getService("config"),serialize={},parse={},defaultSerializers={json:function(){if(typeof window.JSON!=="undefined")return{serialize:window.JSON.stringify,parse:window.JSON.parse};return{serialize:serializeToJSON,parse:function(data){return eval("("+data+")")}}}()},updateConfig=null,isInitialized=false;function addObjectIfExist(paths,
rootObj,propertyName){var i,len,obj;paths=paths||[];for(i=0,len=paths.length;i<len;i+=1){obj=paths[i];if(typeof obj==="string")obj=core.utils.access(obj);if(typeof obj==="function"){rootObj[propertyName]=obj;break}}}function checkParserAndSerializer(){var isParserAndSerializerInvalid;if(typeof serialize.json!=="function"||typeof parse.json!=="function")isParserAndSerializerInvalid=true;else{if(typeof parse.json('{"foo": "bar"}')==="undefined")isParserAndSerializerInvalid=true;else isParserAndSerializerInvalid=
parse.json('{"foo": "bar"}').foo!=="bar";if(typeof parse.json("[1, 2]")==="undefined")isParserAndSerializerInvalid=true;else{isParserAndSerializerInvalid=isParserAndSerializerInvalid||parse.json("[1, 2]")[0]!==1;isParserAndSerializerInvalid=isParserAndSerializerInvalid||parse.json("[1,2]")[1]!==2}isParserAndSerializerInvalid=isParserAndSerializerInvalid||serialize.json({"foo":"bar"})!=='{"foo":"bar"}';isParserAndSerializerInvalid=isParserAndSerializerInvalid||serialize.json([1,2])!=="[1,2]"}return isParserAndSerializerInvalid}
function initSerializerService(config){var format;for(format in config)if(config.hasOwnProperty(format)){addObjectIfExist(config[format].stringifiers,serialize,format);addObjectIfExist(config[format].parsers,parse,format)}if(!(config.json&&config.json.hasOwnProperty("defaultToBuiltin"))||config.json.defaultToBuiltin===true){serialize.json=serialize.json||defaultSerializers.json.serialize;parse.json=parse.json||defaultSerializers.json.parse}if(typeof serialize.json!=="function"||typeof parse.json!==
"function")core.fail("JSON parser and/or serializer not provided in the UIC config. Can't continue.");if(checkParserAndSerializer())core.fail("JSON stringification and parsing are not working as expected");if(configService.subscribe)configService.subscribe("configupdated",updateConfig);isInitialized=true}function destroy(){serialize={};parse={};configService.unsubscribe("configupdated",updateConfig);isInitialized=false}updateConfig=function(){configService=core.getService("config");initSerializerService(configService.getServiceConfig("serializer")||
{})};return{init:function(){if(!isInitialized)initSerializerService(configService.getServiceConfig("serializer")||{});else;},destroy:function(){destroy()},parse:function(data,type){type=type||"json";return parse[type](data)},serialize:function(data,type){type=type||"json";return serialize[type](data)}}});
TLT.addModule("TLCookie",function(context){var moduleConfig,visitorCookieName="CoreID6",sessionCookieName,tlAppKey,utils=context.utils;function createTLTSID(){var cookieValue=utils.getRandomString(32);utils.setCookie(sessionCookieName,cookieValue);return utils.getCookieValue(sessionCookieName)}function createVisitorCookie(){var dataSet="123456789",cookieValue=utils.getRandomString(1,dataSet)+utils.getRandomString(22,dataSet+"0");utils.setCookie(visitorCookieName,cookieValue,3E8);return utils.getCookieValue(visitorCookieName)}
function processConfig(config){var reqHeaders=[],sessionCookieValue,visitorCookieValue;if(config.tlAppKey){tlAppKey=config.tlAppKey;reqHeaders.push({name:"X-Tealeaf-SaaS-AppKey",value:tlAppKey})}if(config.sessionizationCookieName){sessionCookieName=config.sessionizationCookieName;sessionCookieValue=utils.getCookieValue(sessionCookieName);if(!sessionCookieValue&&sessionCookieName==="TLTSID")sessionCookieValue=createTLTSID();reqHeaders.push({name:"X-Tealeaf-SaaS-TLTSID",value:sessionCookieValue})}if(config.visitorCookieEnabled){visitorCookieValue=
utils.getCookieValue(visitorCookieName);if(!visitorCookieValue)visitorCookieValue=createVisitorCookie();reqHeaders.push({name:"X-Tealeaf-DAVID",value:visitorCookieValue})}if(reqHeaders.length)TLT.registerBridgeCallbacks([{enabled:true,cbType:"addRequestHeaders",cbFunction:function(){return reqHeaders}}])}return{init:function(){moduleConfig=context.getConfig()||{};processConfig(moduleConfig)},destroy:function(){},onevent:function(webEvent){}}});
if(TLT&&typeof TLT.addModule==="function")TLT.addModule("overstat",function(context){var tlTypes={"input:radio":"radioButton","input:checkbox":"checkBox","input:text":"textBox","input:password":"textBox","input:file":"fileInput","input:button":"button","input:submit":"submitButton","input:reset":"resetButton","input:image":"image","input:color":"color","input:date":"date","input:datetime":"datetime","input:datetime-local":"datetime-local","input:number":"number","input:email":"email","input:tel":"tel",
"input:search":"search","input:url":"url","input:time":"time","input:week":"week","input:month":"month","textarea:":"textBox","select:":"selectList","button:":"button","a:":"link"},eventMap={},configDefaults={updateInterval:250,hoverThresholdMin:1E3,hoverThresholdMax:2*60*1E3,gridCellMaxX:10,gridCellMaxY:10,gridCellMinWidth:20,gridCellMinHeight:20};function getValue(parentObj,propertyAsStr){var i,properties;if(!parentObj||typeof parentObj!=="object")return null;properties=propertyAsStr.split(".");
for(i=0;i<properties.length;i+=1){if(typeof parentObj==="undefined"||parentObj[properties[i]]===null)return null;parentObj=parentObj[properties[i]]}return parentObj}function getConfigValue(key){var overstatConfig=context.getConfig()||{},value=overstatConfig[key];return typeof value==="number"?value:configDefaults[key]}function postUIEvent(hoverEvent,options){var tagName=getValue(hoverEvent,"webEvent.target.element.tagName")||"",type=tagName.toLowerCase()==="input"?getValue(hoverEvent,"webEvent.target.element.type"):
"",tlType=tlTypes[tagName.toLowerCase()+":"+type]||tagName,uiEvent={type:9,event:{hoverDuration:hoverEvent.hoverDuration,hoverToClick:getValue(options,"hoverToClick")},target:{id:getValue(hoverEvent,"webEvent.target.id")||"",idType:getValue(hoverEvent,"webEvent.target.idType")||"",name:getValue(hoverEvent,"webEvent.target.name")||"",tlType:tlType,type:tagName,subType:type,position:{width:getValue(hoverEvent,"webEvent.target.element.offsetWidth")||0,height:getValue(hoverEvent,"webEvent.target.element.offsetHeight")||
0,relXY:hoverEvent.gridX+","+hoverEvent.gridY}}};if(typeof uiEvent.target.id===undefined||uiEvent.target.id==="")return;context.post(uiEvent)}function stopNode(node){if(node&&node.element)node=node.element;return!node||node===document.body||node===document.html||node===document}function getParent(node){if(!node)return null;return node.element?node.element.parentNode:node.parentNode}function getOffsetParent(node){if(!node)return null;var parent=node.element?node.element.offsetParent:node.offsetParent;
return parent||getParent(node)}function isChildOf(root,node){if(!node||node===root)return false;node=getParent(node);while(!stopNode(node)){if(node===root)return true;node=getParent(node)}return false}function getNativeEvent(e){if(e.nativeEvent)e=e.nativeEvent;return e}function getNativeTarget(e){return getNativeEvent(e).target}function getNativeNode(node){if(!node)return null;return node.element||node}function getNodeType(node){if(!node)return-1;if(node.element)node=node.element;return node.nodeType||
-1}function getNodeTagName(node){if(!node)return"";if(node.element)node=node.element;return node.tagName?node.tagName.toUpperCase():""}function getNodeElement(node){if(node&&node.element)node=node.element;return node}function stopEventPropagation(e){if(!e)return;if(e.nativeEvent)e=e.nativeEvent;if(e.stopPropagation)e.stopPropagation();else if(e.cancelBubble)e.cancelBubble()}function ignoreNode(node){var tagName=getNodeTagName(node);return getNodeType(node)!==1||tagName==="TR"||tagName==="TBODY"||
tagName==="THEAD"}function getXPathFromNode(node){if(!node)return"";if(node.xPath)return node.xPath;node=getNativeNode(node);return context.getXPathFromNode(node)}function callHoverEventMethod(key,methodName){var hEvent=eventMap[key];if(hEvent&&hEvent[methodName])return hEvent[methodName]()}function HoverEvent(dm,gx,gy,webEvent){this.xPath=dm!==null?getXPathFromNode(dm):"";this.domNode=dm;this.hoverDuration=0;this.hoverUpdateTime=0;this.gridX=Math.max(gx,0);this.gridY=Math.max(gy,0);this.parentKey=
"";this.updateTimer=-1;this.disposed=false;this.childKeys={};this.webEvent=webEvent;this.getKey=function(){return this.xPath+":"+this.gridX+","+this.gridY};this.update=function(){var curTime=(new Date).getTime(),key=this.getKey();if(this.hoverUpdateTime!==0)this.hoverDuration+=curTime-this.hoverUpdateTime;this.hoverUpdateTime=curTime;clearTimeout(this.updateTimer);this.updateTimer=setTimeout(function(){callHoverEventMethod(key,"update")},getConfigValue("updateInterval"))};this.dispose=function(leaveClone){clearTimeout(this.updateTimer);
delete eventMap[this.getKey()];this.disposed=true;if(leaveClone){var cloneEvt=this.clone();eventMap[cloneEvt.getKey()]=cloneEvt;cloneEvt.update()}};this.process=function(wasClicked){clearTimeout(this.updateTimer);if(this.disposed)return false;var addedToQueue=false,hEvent=this,key=null;if(this.hoverDuration>=getConfigValue("hoverThresholdMin")){this.hoverDuration=Math.min(this.hoverDuration,getConfigValue("hoverThresholdMax"));addedToQueue=true;postUIEvent(this,{hoverToClick:!!wasClicked});while(typeof hEvent!==
"undefined"){hEvent.dispose(wasClicked);hEvent=eventMap[hEvent.parentKey]}}else this.dispose(wasClicked);return addedToQueue};this.clone=function(){var cloneEvent=new HoverEvent(this.domNode,this.gridX,this.gridY);cloneEvent.parentKey=this.parentKey;return cloneEvent}}function createHoverEvent(node,x,y,webEvt){return new HoverEvent(node,x,y,webEvt)}function calculateNodeOffset(node){if(node&&node.position)return{x:node.position.x,y:node.position.y};node=getNodeElement(node);var offsetX=node.offsetLeft,
offsetY=node.offsetTop,lastOffsetX=offsetX,lastOffsetY=offsetY,offsetDiffX=0,offsetDiffY=0,curNode=getOffsetParent(node);while(curNode){if(stopNode(curNode))break;offsetDiffX=curNode.offsetLeft-(curNode.scrollLeft||0);offsetDiffY=curNode.offsetTop-(curNode.scrollTop||0);if(offsetDiffX!==lastOffsetX||offsetDiffY!==lastOffsetY){offsetX+=offsetDiffX;offsetY+=offsetDiffY;lastOffsetX=offsetDiffX;lastOffsetY=offsetDiffY}curNode=getOffsetParent(curNode)}if(isNaN(offsetX))offsetX=0;if(isNaN(offsetY))offsetY=
0;return{x:offsetX,y:offsetY}}function calculateRelativeCursorPos(node,cursorX,cursorY){node=getNodeElement(node);var nodeOffset=calculateNodeOffset(node),offsetX=cursorX-nodeOffset.x,offsetY=cursorY-nodeOffset.y;if(!isFinite(offsetX))offsetX=0;if(!isFinite(offsetY))offsetY=0;return{x:offsetX,y:offsetY}}function calculateGridCell(node,offsetX,offsetY){node=getNodeElement(node);var cellWidth=node.offsetWidth>0?Math.max(node.offsetWidth/getConfigValue("gridCellMaxX"),getConfigValue("gridCellMinWidth")):
getConfigValue("gridCellMinWidth"),cellHeight=node.offsetHeight>0?Math.max(node.offsetHeight/getConfigValue("gridCellMaxY"),getConfigValue("gridCellMinHeight")):getConfigValue("gridCellMinHeight"),cellX=Math.floor(offsetX/cellWidth),cellY=Math.floor(offsetY/cellHeight);if(!isFinite(cellX))cellX=0;if(!isFinite(cellY))cellY=0;return{x:cellX,y:cellY}}function cleanupHoverEvents(curEvent){var hEvent=curEvent,curKey=curEvent.getKey(),allowedKeyMap={},key=null,childKey=null;allowedKeyMap[curKey]=true;while(typeof hEvent!==
"undefined"){allowedKeyMap[hEvent.parentKey]=true;if(hEvent.parentKey===""||hEvent.parentKey===hEvent.getKey())break;hEvent=eventMap[hEvent.parentKey]}for(key in eventMap)if(eventMap.hasOwnProperty(key)&&!allowedKeyMap[key]){hEvent=eventMap[key];if(hEvent)hEvent.process()}}function processEventsByDomNode(eventNode,keyToIgnore){var hEvent=null,key=null;for(key in eventMap)if(eventMap.hasOwnProperty(key)){hEvent=eventMap[key];if(hEvent.domNode===eventNode&&hEvent.getKey()!==keyToIgnore)hEvent.process()}}
function hoverHandler(e,node,isParent){if(!node)node=e.target;if(stopNode(node))return null;if(context.utils.isiOS||context.utils.isAndroid)return null;var rPos,gPos,hEvent,key,parentKey,parentEvent,offsetParent;if(!ignoreNode(node)){rPos=calculateRelativeCursorPos(node,e.position.x,e.position.y);gPos=calculateGridCell(node,rPos.x,rPos.y);hEvent=new HoverEvent(node,gPos.x,gPos.y,e);key=hEvent.getKey();if(eventMap[key])hEvent=eventMap[key];else eventMap[key]=hEvent;hEvent.update();if(!isParent){offsetParent=
getOffsetParent(node);if(offsetParent){parentEvent=hoverHandler(e,offsetParent,true);if(parentEvent!==null){parentKey=parentEvent.getKey();key=hEvent.getKey();if(key!==parentKey)hEvent.parentKey=parentKey}}cleanupHoverEvents(hEvent)}}else hEvent=hoverHandler(e,getOffsetParent(node),isParent);return hEvent}function leaveHandler(e){e=getNativeEvent(e);if(isChildOf(e.target,e.relatedTarget))return;processEventsByDomNode(e.target)}function clickHandler(e){var hEvent=null,key;for(key in eventMap)if(eventMap.hasOwnProperty(key)){hEvent=
eventMap[key];hEvent.process(true)}}function handleEvent(e){var targetId=getValue(e,"target.id");if(!targetId)return;switch(e.type){case "mousemove":hoverHandler(e);break;case "mouseout":leaveHandler(e);break;case "click":clickHandler(e);break}}return{init:function(){},destroy:function(){var key,i;for(key in eventMap)if(eventMap.hasOwnProperty(key)){eventMap[key].dispose();delete eventMap[key]}},onevent:function(event){if(typeof event!=="object"||!event.type)return;handleEvent(event)},onmessage:function(msg){},
createHoverEvent:createHoverEvent,cleanupHoverEvents:cleanupHoverEvents,eventMap:eventMap}});else;
if(TLT&&typeof TLT.addModule==="function")TLT.addModule("performance",function(context){var moduleState={loadReceived:false,unloadReceived:false,perfEventSent:false},calculatedRenderTime=0;function isFiltered(prop,filter){if(typeof prop!=="string")return false;if(!filter||typeof filter!=="object")return false;return filter[prop]===true}function parseTiming(timing,filter){var epoch=0,normalizedTiming={},prop="",value=0;if(!timing||typeof timing!=="object"||!timing.navigationStart)return{};epoch=timing.navigationStart;
for(prop in timing)if(Object.prototype.hasOwnProperty.call(timing,prop)||typeof timing[prop]==="number")if(!isFiltered(prop,filter)){value=timing[prop];if(typeof value==="number"&&value&&prop!=="navigationStart")normalizedTiming[prop]=value-epoch;else normalizedTiming[prop]=value}return normalizedTiming}function getRenderTime(timing){var renderTime=0,startTime,endTime,utils=context.utils;if(timing){startTime=timing.responseEnd>0&&timing.responseEnd<timing.domLoading?timing.responseEnd:timing.domLoading;
endTime=timing.loadEventStart;if(utils.isNumeric(startTime)&&utils.isNumeric(endTime)&&endTime>startTime)renderTime=endTime-startTime}return renderTime}function processLoadEvent(event){var startTime=context.getStartTime();if(event.timestamp>startTime&&!calculatedRenderTime)calculatedRenderTime=event.timestamp-startTime}function postPerformanceEvent(window){var config=context.getConfig()||{},navType="UNKNOWN",queueEvent={type:7,performance:{}},navigation,performance,timing;if(!window||moduleState.perfEventSent)return;
performance=window.performance||{};timing=performance.timing;navigation=performance.navigation;if(timing){queueEvent.performance.timing=parseTiming(timing,config.filter);queueEvent.performance.timing.renderTime=getRenderTime(timing)}else if(config.calculateRenderTime)queueEvent.performance.timing={renderTime:calculatedRenderTime,calculated:true};else return;if(config.renderTimeThreshold&&queueEvent.performance.timing.renderTime>config.renderTimeThreshold){queueEvent.performance.timing.invalidRenderTime=
queueEvent.performance.timing.renderTime;delete queueEvent.performance.timing.renderTime}if(navigation){switch(navigation.type){case 0:navType="NAVIGATE";break;case 1:navType="RELOAD";break;case 2:navType="BACKFORWARD";break;default:navType="UNKNOWN";break}queueEvent.performance.navigation={type:navType,redirectCount:navigation.redirectCount}}context.post(queueEvent);moduleState.perfEventSent=true}return{init:function(){},destroy:function(){},onevent:function(event){if(typeof event!=="object"||!event.type)return;
switch(event.type){case "load":moduleState.loadReceived=true;processLoadEvent(event);break;case "unload":moduleState.unloadReceived=true;if(!moduleState.perfEventSent)postPerformanceEvent(window);break;default:break}},onmessage:function(msg){}}});else;
TLT.addModule("replay",function(context){var tlTypes={"a:":"link","button:button":"button","button:submit":"button","input:button":"button","input:checkbox":"checkBox","input:color":"colorPicker","input:date":"datePicker","input:datetime":"datetimePicker","input:datetime-local":"datetime-local","input:email":"emailInput","input:file":"fileInput","input:image":"image","input:month":"month","input:number":"numberPicker","input:password":"textBox","input:radio":"radioButton","input:range":"slider","input:reset":"resetButton",
"input:search":"searchBox","input:submit":"submitButton","input:tel":"tel","input:text":"textBox","input:time":"timePicker","input:url":"urlBox","input:week":"week","select:":"selectList","select:select-one":"selectList","textarea:":"textBox","textarea:textarea":"textBox"},utils=context.utils,currOrientation=0,savedTouch={scale:0,timestamp:0},pastEvents={},prevHash=window.location.hash,lastEventId=null,tmpQueue=[],eventCounter=0,firstDOMCaptureEventFlag=true,curClientState=null,pastClientState=null,
onerrorHandled=false,errorCount=0,visitOrder="",lastVisit="",pageLoadTime=(new Date).getTime(),pageDwellTime=0,prevWebEvent=null,viewEventStart=null,viewTimeStart=null,scrollViewStart=null,scrollViewEnd=null,nextScrollViewStart=null,viewPortXStart=0,viewPortYStart=0,inBetweenEvtsTimer=null,lastFocusEvent={inFocus:false},lastClickEvent=null,isApple=utils.isiOS,isAndroidChrome=navigator.userAgent.indexOf("Chrome")>-1&&utils.isAndroid,devicePixelRatio=window.devicePixelRatio||1,deviceToolbarHeight=window.screen?
window.screen.height-window.screen.availHeight:0,replayConfig=context.getConfig()||{},deviceScale=1,previousDeviceScale=1,extendGetItem,gridValues={cellMaxX:10,cellMaxY:10,cellMinWidth:20,cellMinHeight:20};function isTargetClickable(target){var clickable=false,clickableInputTypes="|button|image|submit|reset|",subType=null;if(typeof target!=="object"||!target.type)return clickable;switch(target.type.toLowerCase()){case "input":subType="|"+(target.subType||"")+"|";if(clickableInputTypes.indexOf(subType.toLowerCase())===
-1)clickable=false;else clickable=true;break;case "select":case "textarea":clickable=false;break;default:clickable=true;break}return clickable}function parentElements(node){var parents=[];node=node.parentNode;while(node){parents.push(node);node=node.parentNode}return parents}function getParentLink(parents){return utils.some(parents,function(node){var tagName=utils.getTagName(node);if(tagName==="a"||tagName==="button")return node;return null})}function getTlEvent(webEvent){var tlEvent=webEvent.type,
target=webEvent.target;if(typeof tlEvent==="string")tlEvent=tlEvent.toLowerCase();else tlEvent="unknown";if(tlEvent==="blur")tlEvent="focusout";if(tlEvent==="change")if(target.type==="INPUT")switch(target.subType){case "text":case "date":case "time":tlEvent=target.subType+"Change";break;default:tlEvent="valueChange";break}else if(target.type==="TEXTAREA")tlEvent="textChange";else tlEvent="valueChange";return tlEvent}function scheduleDOMCapture(root,config,delay){var dcid=null;if(!root)return dcid;
config=config||{};config.eventOn=firstDOMCaptureEventFlag;firstDOMCaptureEventFlag=false;if(delay){dcid="dcid-"+utils.getSerialNumber()+"."+(new Date).getTime()+"s";window.setTimeout(function(){config.dcid=dcid;context.performDOMCapture(root,config)},delay)}else{delete config.dcid;dcid=context.performDOMCapture(root,config)}return dcid}function addDOMCapture(eventType,target,screenviewName){var i,capture=false,captureConfig,dcEnabled=false,dcTrigger,dcTriggerList,dcid=null,delay=0,len;if(!eventType||
!target&&!screenviewName)return dcid;if(!target&&!(eventType==="load"||eventType==="unload"))return dcid;replayConfig=context.getConfig()||{};dcEnabled=utils.getValue(replayConfig,"domCapture.enabled",false);if(!dcEnabled||utils.isLegacyIE)return dcid;dcTriggerList=utils.getValue(replayConfig,"domCapture.triggers")||[];for(i=0,len=dcTriggerList.length;!capture&&i<len;i+=1){dcTrigger=dcTriggerList[i];if(dcTrigger.event===eventType)if(eventType==="load"||eventType==="unload")if(dcTrigger.screenviews)if(window.location.hash.indexOf("#checkin")>
-1&&-1!==utils.indexOf(dcTrigger.screenviews,"#checkin")&&eventType==="load")capture=true;else if(window.location.hash.indexOf("payment-completion")>-1&&-1!==utils.indexOf(dcTrigger.screenviews,"#payment-completion"))capture=true;else capture=-1!==utils.indexOf(dcTrigger.screenviews,screenviewName);else capture=true;else if(dcTrigger.nontargets){if(-1==utils.matchTarget(dcTrigger.nontargets,target))if(dcTrigger.targets)capture=-1!==utils.matchTarget(dcTrigger.targets,target)}else if(dcTrigger.targets)capture=
-1!==utils.matchTarget(dcTrigger.targets,target);else capture=true}if(capture){captureConfig=utils.getValue(replayConfig,"domCapture.options",{});delay=dcTrigger.delay||0;dcid=scheduleDOMCapture(window.document,captureConfig,delay)}return dcid}function createQueueEvent(options){var control,dcid,target=utils.getValue(options,"webEvent.target",{}),targetType=target.type,targetSubtype=target.subType||"",tlType=tlTypes[targetType.toLowerCase()+":"+targetSubtype.toLowerCase()]||targetType,parents=parentElements(utils.getValue(target,
"element")),parentLinkNode=null,relXY=utils.getValue(target,"position.relXY"),eventSubtype=utils.getValue(options,"webEvent.subType",null);control={timestamp:utils.getValue(options,"webEvent.timestamp",0),type:4,target:{id:target.id||"",idType:target.idType,name:target.name,tlType:tlType,type:targetType,position:{width:utils.getValue(target,"element.offsetWidth"),height:utils.getValue(target,"element.offsetHeight")},currState:options.currState||null},event:{tlEvent:getTlEvent(utils.getValue(options,
"webEvent")),type:utils.getValue(options,"webEvent.type","UNKNOWN")}};if(targetSubtype)control.target.subType=targetSubtype;if(relXY)control.target.position.relXY=relXY;if(typeof options.dwell==="number"&&options.dwell>0)control.target.dwell=options.dwell;if(typeof options.visitedCount==="number")control.target.visitedCount=options.visitedCount;if(typeof options.prevState!=="undefined")control.prevState=options.prevState;if(eventSubtype)control.event.subType=eventSubtype;parentLinkNode=getParentLink(parents);
control.target.isParentLink=!!parentLinkNode;if(parentLinkNode){if(parentLinkNode.href){control.target.currState=control.target.currState||{};control.target.currState.href=control.target.currState.href||parentLinkNode.href}if(parentLinkNode.value){control.target.currState=control.target.currState||{};control.target.currState.value=control.target.currState.value||parentLinkNode.value}if(parentLinkNode.innerText||parentLinkNode.textContent){control.target.currState=control.target.currState||{};control.target.currState.innerText=
utils.trim(control.target.currState.innerText||parentLinkNode.innerText||parentLinkNode.textContent)}}if(utils.isUndefOrNull(control.target.currState))delete control.target.currState;if(utils.isUndefOrNull(control.target.name))delete control.target.name;if(control.event.type!=="click"||isTargetClickable(target)){dcid=addDOMCapture(control.event.type,target);if(dcid)control.dcid=dcid}return control}function postUIEvent(queueEvent){context.post(queueEvent)}function postEventQueue(queue){var i=0,j,len=
queue.length,e1,e2,tmp,ignoredEvents={mouseout:true,mouseover:true},results=[];for(i=0;i<len;i+=1){e1=queue[i];if(!e1)continue;if(ignoredEvents[e1.event.type])results.push(e1);else{for(j=i+1;j<len&&queue[j];j+=1)if(!ignoredEvents[queue[j].event.type])break;if(j<len){e2=queue[j];if(e2&&e1.target.id===e2.target.id&&e1.event.type!==e2.event.type){if(e1.event.type==="click"){tmp=e1;e1=e2;e2=tmp}if(e2.event.type==="click"){e1.target.position=e2.target.position;i+=1}else if(e2.event.type==="blur"){e1.target.dwell=
e2.target.dwell;e1.target.visitedCount=e2.target.visitedCount;e1.focusInOffset=e2.focusInOffset;e1.target.position=e2.target.position;i+=1}queue[j]=null;queue[i]=e1}}results.push(queue[i])}}for(e1=results.shift();e1;e1=results.shift())context.post(e1);queue.splice(0,queue.length)}if(typeof window.onerror!=="function"){window.onerror=function(msg,url,line){var errorMessage=null;if(typeof msg!=="string")return;line=line||-1;errorMessage={type:6,exception:{description:msg,url:url,line:line}};errorCount+=
1;context.post(errorMessage)};onerrorHandled=true}function handleFocus(id,webEvent){lastFocusEvent=webEvent;lastFocusEvent.inFocus=true;if(typeof pastEvents[id]==="undefined")pastEvents[id]={};pastEvents[id].focus=lastFocusEvent.dwellStart=Number(new Date);pastEvents[id].focusInOffset=viewTimeStart?lastFocusEvent.dwellStart-Number(viewTimeStart):-1;pastEvents[id].prevState=utils.getValue(webEvent,"target.state");pastEvents[id].visitedCount=pastEvents[id].visitedCount+1||1}function addToTmpQueue(webEvent,
id){tmpQueue.push(createQueueEvent({webEvent:webEvent,id:id,currState:utils.getValue(webEvent,"target.state")}))}function handleBlur(id,webEvent){var convertToBlur=false,dcid,lastQueueEvent,i=0;if(typeof id==="undefined"||id===null||typeof webEvent==="undefined"||webEvent===null)return;if(typeof pastEvents[id]!=="undefined"&&pastEvents[id].hasOwnProperty("focus"))pastEvents[id].dwell=Number(new Date)-pastEvents[id].focus;else{pastEvents[id]={};pastEvents[id].dwell=0}if(tmpQueue.length===0){if(!lastFocusEvent.inFocus)return;
addToTmpQueue(webEvent,id)}lastFocusEvent.inFocus=false;if(tmpQueue[tmpQueue.length-1])for(i=tmpQueue.length-1;i>=0;i--)tmpQueue[i].target.visitedCount=pastEvents[id].visitedCount;lastQueueEvent=tmpQueue[tmpQueue.length-1];if(lastQueueEvent){lastQueueEvent.target.dwell=pastEvents[id].dwell;lastQueueEvent.focusInOffset=pastEvents[id].focusInOffset;lastQueueEvent.target.visitedCount=pastEvents[id].visitedCount;if(lastQueueEvent.event.type==="click"){if(!isTargetClickable(lastQueueEvent.target)){lastQueueEvent.target.currState=
utils.getValue(webEvent,"target.state")||utils.getValue(webEvent,"target.currState");convertToBlur=true}}else if(lastQueueEvent.event.type==="focus")convertToBlur=true;if(convertToBlur){lastQueueEvent.event.type="blur";lastQueueEvent.event.tlEvent="focusout";dcid=addDOMCapture(lastQueueEvent.event.type,webEvent.target);if(dcid)lastQueueEvent.dcid=dcid}}postEventQueue(tmpQueue)}function checkQueue(id,webEvent){var hasInQueue=false,tmpQueueLength=tmpQueue.length,tmpQueueEvent=tmpQueueLength>0?tmpQueue[tmpQueueLength-
1]:null;if(!tmpQueueEvent)return hasInQueue;if(tmpQueueEvent.target.id!==id&&tmpQueueEvent.target.tltype!=="selectList")if(webEvent.type==="focus"||webEvent.type==="click"||webEvent.type==="change"){handleBlur(tmpQueueEvent.target.id,tmpQueueEvent);hasInQueue=true}return hasInQueue}function handleChange(id,webEvent){if(typeof pastEvents[id]!=="undefined"&&!pastEvents[id].hasOwnProperty("focus"))handleFocus(id,webEvent);addToTmpQueue(webEvent,id);if(typeof pastEvents[id]!=="undefined"&&typeof pastEvents[id].prevState!==
"undefined")if(tmpQueue[tmpQueue.length-1].target.tlType==="textBox"||tmpQueue[tmpQueue.length-1].target.tlType==="selectList")tmpQueue[tmpQueue.length-1].target.prevState=pastEvents[id].prevState}function getRelativeXY(webEvent){var cellWidth,cellHeight,cellX,cellY,node=utils.getValue(webEvent,"target.element"),offsetX=utils.getValue(webEvent,"target.position.x")||0,offsetY=utils.getValue(webEvent,"target.position.y")||0;node=node&&node.element?node.element:node;cellWidth=node.offsetWidth>0?Math.max(node.offsetWidth/
gridValues.cellMaxX,gridValues.cellMinWidth):gridValues.cellMinWidth;cellHeight=node.offsetHeight>0?Math.max(node.offsetHeight/gridValues.cellMaxY,gridValues.cellMinHeight):gridValues.cellMinHeight;cellX=Math.floor(offsetX/cellWidth);cellY=Math.floor(offsetY/cellHeight);if(!isFinite(cellX))cellX=0;if(!isFinite(cellY))cellY=0;return cellX+","+cellY}function handleClick(id,webEvent){var relXY,addRelXY=true,tmpQueueLength=0;if(webEvent.target.type==="select"&&lastClickEvent&&lastClickEvent.target.id===
id){lastClickEvent=null;return}if(!lastFocusEvent.inFocus)handleFocus(id,webEvent);tmpQueueLength=tmpQueue.length;if(tmpQueueLength&&utils.getValue(tmpQueue[tmpQueueLength-1],"event.type")!=="change")handleChange(id,webEvent);relXY=getRelativeXY(webEvent);tmpQueueLength=tmpQueue.length;if(webEvent.position.x===0&&webEvent.position.y===0&&tmpQueueLength&&utils.getValue(tmpQueue[tmpQueueLength-1],"target.tlType")==="radioButton")addRelXY=false;else webEvent.target.position.relXY=relXY;if(tmpQueueLength&&
utils.getValue(tmpQueue[tmpQueueLength-1],"target.id")===id){if(addRelXY)tmpQueue[tmpQueueLength-1].target.position.relXY=relXY}else addToTmpQueue(webEvent,id);lastClickEvent=webEvent}function handleOrientationChange(webEvent){var newOrientation=webEvent.orientation,orientationChangeEvent={type:4,event:{type:"orientationchange"},target:{prevState:{orientation:currOrientation,orientationMode:utils.getOrientationMode(currOrientation)},currState:{orientation:newOrientation,orientationMode:utils.getOrientationMode(newOrientation)}}};
postUIEvent(orientationChangeEvent);currOrientation=newOrientation}function isDuplicateTouch(touchState){var result=false;if(!touchState)return result;result=savedTouch.scale===touchState.scale&&Math.abs((new Date).getTime()-savedTouch.timestamp)<500;return result}function saveTouchState(touchState){savedTouch.scale=touchState.scale;savedTouch.rotation=touchState.rotation;savedTouch.timestamp=(new Date).getTime()}function getPinchType(){var s,pinchType;s=deviceScale-previousDeviceScale;if(isNaN(s))pinchType=
"INVALID";else if(s<0)pinchType="CLOSE";else if(s>0)pinchType="OPEN";else pinchType="NONE";return pinchType}function getClientStateMessage(webEvent){var documentElement=document.documentElement,documentBody=document.body,screen=window.screen,screenWidth=screen.width,screenHeight=screen.height,deviceOrientation=utils.getValue(webEvent,"orientation",0),normalizedScreenWidth=!isApple?screenWidth:Math.abs(deviceOrientation)===90?screenHeight:screenWidth,msg={type:1,clientState:{pageWidth:document.width||
(!documentElement?0:documentElement.offsetWidth),pageHeight:Math.max(!document.height?0:document.height,!documentElement?0:documentElement.offsetHeight,!documentElement?0:documentElement.scrollHeight),viewPortWidth:window.innerWidth||documentElement.clientWidth,viewPortHeight:window.innerHeight||documentElement.clientHeight,viewPortX:window.pageXOffset||(!documentElement?!documentBody?0:documentBody.scrollLeft:documentElement.scrollLeft||0),viewPortY:window.pageYOffset||(!documentElement?!documentBody?
0:documentBody.scrollTop:documentElement.scrollTop||0),deviceOrientation:deviceOrientation,event:utils.getValue(webEvent,"type")}},scaleWidth;pastClientState=pastClientState||msg;scaleWidth=!msg.clientState.viewPortWidth?1:normalizedScreenWidth/msg.clientState.viewPortWidth;msg.clientState.deviceScale=scaleWidth.toFixed(3);msg.clientState.viewTime=0;if(scrollViewStart&&scrollViewEnd)msg.clientState.viewTime=scrollViewEnd.getTime()-scrollViewStart.getTime();if(webEvent.type==="scroll"){msg.clientState.viewPortXStart=
pastClientState.clientState.viewPortX;msg.clientState.viewPortYStart=pastClientState.clientState.viewPortY}return msg}function sendClientState(){if(curClientState){postUIEvent(curClientState);pastClientState=curClientState;curClientState=null;scrollViewStart=nextScrollViewStart||scrollViewStart;scrollViewEnd=null}sendClientState.timeoutId=0}function handleClientState(webEvent){var attentionMsg=null;curClientState=getClientStateMessage(webEvent);if(webEvent.type==="scroll"||webEvent.type==="resize"){if(sendClientState.timeoutId)window.clearTimeout(sendClientState.timeoutId);
sendClientState.timeoutId=window.setTimeout(sendClientState,utils.getValue(replayConfig,"scrollTimeout",2E3))}else if(webEvent.type==="touchstart"||webEvent.type==="load"){if(curClientState)previousDeviceScale=parseFloat(curClientState.clientState.deviceScale)}else if(webEvent.type==="touchend")if(curClientState){deviceScale=parseFloat(curClientState.clientState.deviceScale);sendClientState()}if(webEvent.type==="load"||webEvent.type==="unload"){if(webEvent.type==="unload"&&pageLoadTime){attentionMsg=
utils.clone(curClientState);attentionMsg.clientState.event="attention";attentionMsg.clientState.viewTime=(new Date).getTime()-pageLoadTime}sendClientState();if(attentionMsg){curClientState=attentionMsg;sendClientState()}}return curClientState}function handleTouchStart(webEvent){var fingerCount=utils.getValue(webEvent,"nativeEvent.touches.length",0);if(fingerCount===2)handleClientState(webEvent)}function handleTouchEnd(webEvent){var fingerCount,prevTouchState={},rotation=utils.getValue(webEvent,"nativeEvent.rotation",
0)||utils.getValue(webEvent,"nativeEvent.touches[0].webkitRotationAngle",0),scale=utils.getValue(webEvent,"nativeEvent.scale",1),touchState=null,touchEndEvent={type:4,event:{type:"touchend"},target:{id:utils.getValue(webEvent,"target.id"),idType:utils.getValue(webEvent,"target.idType")}};fingerCount=utils.getValue(webEvent,"nativeEvent.changedTouches.length",0)+utils.getValue(webEvent,"nativeEvent.touches.length",0);if(fingerCount!==2)return;handleClientState(webEvent);touchState={rotation:rotation?
rotation.toFixed(2):0,scale:deviceScale?deviceScale.toFixed(2):1};touchState.pinch=getPinchType();prevTouchState.scale=previousDeviceScale?previousDeviceScale.toFixed(2):1;touchEndEvent.target.prevState=prevTouchState;touchEndEvent.target.currState=touchState;postUIEvent(touchEndEvent)}function isDuplicateEvent(curr,prev){var propsToCompare=["type","name","target.id"],prop=null,i,len,duplicate=true,DUPLICATE_EVENT_THRESHOLD_TIME=10,timeDiff=0,currTimeStamp=0,prevTimeStamp=0;if(!curr||!prev||typeof curr!==
"object"||typeof prev!=="object")return false;for(i=0,len=propsToCompare.length;duplicate&&i<len;i+=1){prop=propsToCompare[i];if(utils.getValue(curr,prop)!==utils.getValue(prev,prop)){duplicate=false;break}}if(duplicate){currTimeStamp=utils.getValue(curr,"timestamp");prevTimeStamp=utils.getValue(prev,"timestamp");if(!(isNaN(currTimeStamp)&&isNaN(prevTimeStamp))){timeDiff=Math.abs(utils.getValue(curr,"timestamp")-utils.getValue(prev,"timestamp"));if(isNaN(timeDiff)||timeDiff>DUPLICATE_EVENT_THRESHOLD_TIME)duplicate=
false}}return duplicate}function trackHashchange(){var currHash=window.location.hash;if(currHash===prevHash)return;if(prevHash)TLT.logScreenviewUnload(prevHash);if(currHash)TLT.logScreenviewLoad(currHash);prevHash=currHash}function defaultEventHandler(webEvent){var msg={type:4,event:{type:webEvent.type},target:{id:utils.getValue(webEvent,"target.id"),idType:utils.getValue(webEvent,"target.idType"),currState:utils.getValue(webEvent,"target.state")}},dcid;dcid=addDOMCapture(webEvent.type,webEvent.target);
if(dcid)msg.dcid=dcid;postUIEvent(msg)}function addGeolocationMsg(eventName){var geolocationConfig=utils.getValue(replayConfig,"geolocation"),triggers;if(!geolocationConfig||!geolocationConfig.enabled)return;triggers=geolocationConfig.triggers||[];if(!triggers.length)return;if(triggers[0].event===eventName)TLT.logGeolocation()}return{init:function(){tmpQueue=[]},destroy:function(){handleBlur(lastEventId);tmpQueue=[];if(onerrorHandled){window.onerror=null;onerrorHandled=false}},onevent:function(webEvent){var id=
null,returnObj=null,orientation,screenOrientation;if(typeof webEvent!=="object"||!webEvent.type)return;if(isDuplicateEvent(webEvent,prevWebEvent)){prevWebEvent=webEvent;return}prevWebEvent=webEvent;id=utils.getValue(webEvent,"target.id");if(Object.prototype.toString.call(pastEvents[id])!=="[object Object]")pastEvents[id]={};checkQueue(id,webEvent);inBetweenEvtsTimer=new Date;switch(webEvent.type){case "hashchange":trackHashchange();break;case "focus":returnObj=handleFocus(id,webEvent);break;case "blur":returnObj=
handleBlur(id,webEvent);break;case "click":returnObj=handleClick(id,webEvent);break;case "change":returnObj=handleChange(id,webEvent);break;case "orientationchange":returnObj=handleOrientationChange(webEvent);break;case "touchstart":handleTouchStart(webEvent);break;case "touchend":returnObj=handleTouchEnd(webEvent);break;case "loadWithFrames":TLT.logScreenviewLoad("rootWithFrames");break;case "load":currOrientation=webEvent.orientation;scrollViewStart=new Date;if(typeof window.orientation!=="number"||
utils.isAndroid){screenOrientation=window.screen.width>window.screen.height?90:0;orientation=window.orientation;if(Math.abs(orientation)!==screenOrientation&&!(orientation===180&&screenOrientation===0)){utils.isLandscapeZeroDegrees=true;if(Math.abs(orientation)===180||Math.abs(orientation)===0)currOrientation=90;else if(Math.abs(orientation)===90)currOrientation=0}}handleClientState(webEvent);addGeolocationMsg(webEvent.type);TLT.logScreenviewLoad("root");break;case "screenview_load":viewTimeStart=
new Date;returnObj=addDOMCapture("load",null,webEvent.name);break;case "screenview_unload":returnObj=addDOMCapture("unload",null,webEvent.name);break;case "resize":case "scroll":if(!scrollViewEnd)scrollViewEnd=new Date;nextScrollViewStart=new Date;handleClientState(webEvent);break;case "unload":if(tmpQueue!==null)postEventQueue(tmpQueue);scrollViewEnd=new Date;handleClientState(webEvent);TLT.logScreenviewUnload("root");break;default:defaultEventHandler(webEvent);break}lastEventId=id;return returnObj},
onmessage:function(){}}});
TLT.addModule("sessionStorage",function(context){return{init:function(){var data="";var msg={};data={key:"currentMoment",value:Date.now()};msg={type:8,sessionStorage:data};context.post(msg);if(window.sessionStorage){if(window.location.href.indexOf("mobile")>-1&&sessionStorage["koreanairMobileAppData"]&&sessionStorage["koreanairMobileAppData"]!=""){data={key:"koreanairMobileAppData",value:sessionStorage["koreanairMobileAppData"]};msg={type:8,sessionStorage:data};if(data!=""&&data.value!=null&&data.value!=
"")context.post(msg)}if(window.location.href.indexOf("mobile")>-1&&window.location.href.indexOf("bookingGate.html")>-1&&sessionStorage["bookingGate.prefillDatas"]&&sessionStorage["bookingGate.prefillDatas"]!=""){data={key:"bookingGate.prefillDatas",value:sessionStorage["bookingGate.prefillDatas"]};msg={type:8,sessionStorage:data};if(data!=""&&data.value!=null&&data.value!="")context.post(msg)}}var validHtmls={"htmls":["xairt.html","xaiow.html","xirt.html","xiow.html","adrt.html","adow.html","drt.html",
"dow.html","discountSelect.html","revenue-dom.html","revenue-intl.html","upsell.html","passenger.html","payment.html","award-intl.html","bookingGate.html","booking-gate.html"]};var invalidKeys={"storageKeys":["KOREANAIR_USER_SESSION_DATA_KEY","KOREANAIR_HOMEPAGE_I18N_ANALYSIS_DATA","KOREANAIR_HOMEPAGE_MAIN_CMS_DATA","KOREANAIR_MAIN_MENU_DATA","KOREANAIR_MY_MENU_DATA","ClientSidePersistence","routesInfo"]};if(window.sessionStorage)for(var j=0;j<validHtmls.htmls.length;j++)if(window.location.href.indexOf(validHtmls.htmls[j])>
-1){for(var i=0;i<sessionStorage.length;i++){data="";if(TLT.utils.indexOf(invalidKeys.storageKeys,sessionStorage.key(i))==-1&&(window.location.href.indexOf("mobile")==-1||window.location.href.indexOf("mobile")>-1&&sessionStorage.key(i)=="KE_STRG"+location.hash.split("/")[1]))if(sessionStorage.key(i)=="KE_STRGFLIGHT_SELECT"&&window.location.href.indexOf("FLIGHT_SELECT")>-1||sessionStorage.key(i)=="KE_STRGBOOKING_GATE"&&window.location.href.indexOf("BOOKING_GATE")>-1||sessionStorage.key(i)!="KE_STRGBOOKING_GATE"&&
sessionStorage.key(i)!="KE_STRGFLIGHT_SELECT")data={key:sessionStorage.key(i),value:sessionStorage[sessionStorage.key(i)]};msg={type:8,sessionStorage:data};if(data!=""&&data.value!=null&&data.value!="")context.post(msg)}data="";if(window.location.href.indexOf("booking-gate.html#bookingChange")>-1||window.location.href.indexOf("booking-gate.html#prime")>-1){if(key_bkgt!=""){data={key:"KE_STRGBOOKING_GATE",value:key_bkgt};msg={type:8,sessionStorage:data}}if(data!=""&&data.value!=null&&data.value!="")context.post(msg)}}},
destroy:function(){}}});
TLT.addModule("StopPropagationModule",function(context){function postEvent(id,value,eventType){var jsonMsg={type:4,event:{type:eventType,tlname:eventType},target:{id:id,idType:-1,currState:{value:value}}};context.post(jsonMsg)}return{init:function(){Event.prototype.stopPropagation=function(stopPropagation){return function(){if(typeof stopPropagation!="undefined")stopPropagation.call(this);else this.cancelBubble=true;if(TLT&&TLT.isInitialized()&&this.type=="mousedown")if(TLT.getModuleConfig("replay")&&TLT.getModuleConfig("replay").domCapture&&
TLT.getModuleConfig("replay").domCapture.enabled)TLT.processDOMEvent(this);else{if(location.hash.indexOf("flight-select")>-1||location.hash.indexOf("date-select")>-1)postEvent(this.target.id,this.target.value,"mousedown")}else if(TLT&&TLT.isInitialized())TLT.processDOMEvent(this)}}(Event.prototype.stopPropagation)},destroy:function(){}}});
TLT.addModule("ChosenHelperModule",function(context){return{init:function(){if(typeof window.TLT!=="undefined")if(typeof window.TLT.registerBridgeCallbacks==="function")TLT.registerBridgeCallbacks([{enabled:true,cbType:"messageRedirect",cbFunction:function(msg,msgObj){var target;if(msgObj&&msgObj.type&&msgObj.type===4&&msgObj.event&&msgObj.event.type&&msgObj.event.type=="click"){target=msgObj.target;if(target&&target.idType===-2)if(window.location.href.indexOf("check-in.html#checkin/process/seat-select")!=
-1&&window.location.href.indexOf("mobile")==-1){var regex3=new RegExp('^\\[\\["a",(0|1)\\]\\]$');var regexTest3=regex3.test(target.id);if(regexTest3)if(msgObj.target.currState&&msgObj.target.currState.innerText&&msgObj.target.currState.innerText==Granite.I18n.get("confirm-yes-label"))msgObj.target.id='[["cboxLoadedContent"],["div",1],["a",0]]';else if(msgObj.target.currState&&msgObj.target.currState.innerText&&msgObj.target.currState.innerText==Granite.I18n.get("confirm-no-label"))msgObj.target.id=
'[["cboxLoadedContent"],["div",1],["a",1]]'}else if(target.id=="null"&&(msgObj.target.currState&&msgObj.target.currState.innerText&&msgObj.target.currState.innerText==Granite.I18n.get("show-search-options")))msgObj.target.id='[["checkin-search"],["div",0],["div",1],["button",0]]'}else if(msgObj&&msgObj.type&&msgObj.type===4&&msgObj.event&&msgObj.event.type&&msgObj.event.type=="blur"){target=msgObj.target;var regex3=new RegExp('.*\\["KE[0-9]+_[0-9]+_chosen"\\],\\["input",0\\]\\]');var regexTest3=regex3.test(target.id);
if(regexTest3)if(window.jQuery){msgObj.event.tlEvent="mousedown";msgObj.event.type="mousedown";var regex5=new RegExp('.*\\["(KE[0-9]+_[0-9]+_chosen)"\\],\\["input",0\\]\\]');if(target.id.match(regex5)!=null)divId=target.id.match(regex5)[1];msgObj.target.id+="---"+$("#"+divId).parent().parent().parent().attr("class").split(" ")[0]}}else if(msgObj&&msgObj.type&&msgObj.type===4&&msgObj.event&&msgObj.event.type&&msgObj.event.type=="change"){var ids={"regExConstants":["tlf_ibe_pax_birthDay-","tlf_ibe_pax_birthYear-",
"tlf_ibe_pax_birthMonth-","dateOfBirth_","_accompanyAdultNumber","_frequentFlyerInfo"]};target=msgObj.target;if(target&&target.idType===-1){if(target.id)for(var i=0;i<ids.regExConstants.length;i++){var testRegEx=new RegExp(ids.regExConstants[i]);if(target.id.match(testRegEx))if(target.currState.value==""||target.currState.value==null||target.currState.value=="null")return null}if(target.id&&(target.id=="expirationYears"||target.id=="expirationMonths")||target.name&&(target.name=="ccExpMo"||target.name==
"ccExpYr")){if(target.currState&&target.currState.index&&target.currState.text&&target.currState.text!=Granite.I18n.get("Select")&&target.currState.index!=0){if(target.id=="expirationYears"||target.name=="ccExpYr"){target.currState.index=1;target.currState.text=(new Date).getFullYear()}if(target.id=="expirationMonths"||target.name=="ccExpMo"){target.currState.index=1;target.currState.text="January"}}if(target.prevState&&target.prevState.index&&target.prevState.text&&target.prevState.text!=Granite.I18n.get("Select")&&
target.prevState.index!=0){if(target.id=="expirationYears"||target.name=="ccExpYr"){target.prevState.index=1;target.prevState.text=(new Date).getFullYear()}if(target.id=="expirationMonths"||target.name=="ccExpMo"){target.prevState.index=1;target.prevState.text=Granite.I18n.get("January")}}}}}else if(msgObj&&msgObj.type&&msgObj.type===4&&msgObj.event&&msgObj.event.type&&msgObj.event.type=="mousedown"&&msgObj.target&&msgObj.target.idType===-1&&msgObj.target.id&&msgObj.target.id!="")if(location.href.indexOf("mobile")>
-1&&location.href.indexOf("bookingGate.html")>-1&&location.href.indexOf("isDomestic\x3dfalse")>-1)if($("#"+msgObj.target.id).length){var elemLi=$("#"+msgObj.target.id);if($(elemLi).html()&&$(elemLi).html().match(/.+\((.+)\).+/)&&$(elemLi).html().match(/.+\((.+)\).+/).length>1){var airportCode=$(elemLi).html().match(/.+\((.+)\).+/)[1];msgObj.target.id+="---mobBookIntl---"+airportCode}}return msgObj}}])},destroy:function(){}}});
TLT.addModule("jQueryHelperModule",function(context){var queuedValue="";function postEvent(e,eventType){var jsonMsg={type:4,event:{type:eventType,tlname:eventType},target:{id:e.target.id,idType:e.target.idType,currState:{value:e.target.value}}};context.post(jsonMsg)}function postEvent(id,value,eventType){var jsonMsg={type:4,event:{type:eventType,tlname:eventType},target:{id:id,idType:-1,currState:{value:value}}};context.post(jsonMsg)}function postKeyUp(){postEvent(this.id,this.value,"keydown")}return{DEBUG:false,
ENVIRONMENTDELAY:250,ENVIRONMENTCHECKTRYS:6,init:function(){this.environmentCheck()},destroy:function(){jQuery(document).off("keyup",".ui-autocomplete-input",postKeyUp)},environmentCheck:function(){environmentCheckCount=0;if(window.jQuery)jQuery(document).on("keyup",".ui-autocomplete-input",postKeyUp);else{environmentCheckCount++;if(environmentCheckCount>this.ENVIRONMENTCHECKTRYS)if(this.DEBUG)console.log("jQuery Not Loaded");if(this.DEBUG)console.log("waiting for jQuery:"+environmentCheckCount);
window.setTimeout(this.environmentCheck,this.ENVIRONMENTDELAY)}}}});var changeTarget;
TLT.init({"services":{"browser":{"jQueryObject":"window.jQuery"},"queue":{"queues":[{"qid":"DEFAULT","endpoint":"/api/TealeafTarget.jsp","maxEvents":50,"timerInterval":3E5,"maxSize":3E5,"encoder":"gzip"}],"asyncReqOnUnload":false},"message":{"privacy":[{"targets":[{"id":"verificationNumber","idType":"-1"},{"id":"name\x3dverificationNumber","idType":"-3"}],"maskType":3},{"targets":[{"id":"expirationYears","idType":"-1"},{"id":"name\x3dccExpYr","idType":"-3"}],"maskType":4,"maskFunction":function(value){if(value!=
"")return(new Date).getFullYear();else return""}},{"targets":[{"id":"creditCardNumber","idType":"-1"},{"id":"name\x3daccount","idType":"-3"}],"maskType":4,"maskFunction":function(value){var tempValue=value;tempValue=tempValue.replace(/(\s|-)/g,"");var maskedNumber=tempValue.length-4;var maskedString=tempValue.substring(0,maskedNumber).replace(/\d/g,"X");var maskingRegEx=new RegExp("\\d{"+maskedNumber+"}(\\d{4})");var output=tempValue.replace(maskingRegEx,maskedString+"$1");return output}},{"targets":[{"id":"expirationMonths",
"idType":"-1"},{"id":"name\x3dccExpMo","idType":"-3"}],"maskType":4,"maskFunction":function(value){if(value!="")return"1";else return""}}]},"serializer":{"json":{"defaultToBuiltin":true,"parsers":[],"stringifiers":[]}},"encoder":{"enable":function(){function isIE10AndBelow(){var myNav=navigator.userAgent.toLowerCase();return myNav.indexOf("msie")!=-1?parseInt(myNav.split("msie")[1]):false}if(isIE10AndBelow()&&isIE10AndBelow()<=9)return false;else return true}(),"gzip":{"encode":"window.pako.gzip",
"defaultEncoding":"gzip"}},"domCapture":{"options":{"captureFrames":true,"removeScripts":true,"maxLength":1E8},"diffEnabled":false}},"core":{"ieExcludedLinks":["a.airport"],"modules":{"ChosenHelperModule":{enabled:true},"StopPropagationModule":{enabled:true},"jQueryHelperModule":{enabled:true},"sessionStorage":{enabled:true},"performance":{"enabled":true,"events":[{"name":"load","target":window},{"name":"unload","target":window}]},"replay":{"enabled":true,"events":[{"name":function(){function isIE10AndBelow(){var myNav=
navigator.userAgent.toLowerCase();return myNav.indexOf("msie")!=-1?parseInt(myNav.split("msie")[1]):false}if(isIE10AndBelow()&&isIE10AndBelow()<=9)return"fictionalevent";if((location.hash.indexOf("flight-select")>-1||location.hash.indexOf("date-select")>-1||location.href.indexOf("#payment")>-1||location.href.indexOf("#payment-completion")>-1)&&location.href.indexOf("mobile")==-1||location.href.indexOf("mobile")>-1&&location.href.indexOf("payment.html")>-1||location.href.indexOf("check-in.html")>-1||
location.href.indexOf("/ibe/")>-1||(location.href.indexOf("/mobile/")>-1||location.href.indexOf("/koreanair-mobile/")>-1)&&(location.href.indexOf("ko.html")>-1||location.href.indexOf("en.html")>-1||location.href.indexOf("zh-hk.html")>-1||location.href.indexOf("ru.html")>-1||location.href.indexOf("ja.html")>-1||location.href.indexOf("zh_cn.html")>-1||location.href.indexOf("pt_br.html")>-1||location.href.indexOf("fr.html")>-1||location.href.indexOf("es.html")>-1||location.href.indexOf("de.html")>-1||
location.href.indexOf("ar.html")>-1)||location.href.indexOf("booking-gate.html")>-1||location.href.indexOf("registration.html")>-1||location.href.indexOf("/profile/registration-page.html")>-1||location.href.indexOf("/booking/reservation-search.html")>-1||location.href.indexOf("/booking/on-hold-purchase.html")>-1||location.href.indexOf("/ibe/passenger.html")>-1||location.href.indexOf("/booking/mileage-upgrade.html")>-1||location.href.indexOf("/booking/reissue-gate.html")>-1||location.href.indexOf("/offers-promotion/promotions-hidden/SKYSHOP.html")>
-1||location.href.indexOf("/reissue.html")>-1||location.href.indexOf("/global-payment.html")>-1)return"mousedown";else return"fictionalevent"}()},{"name":"load","target":window},{"name":"unload","target":window},{"name":"click","recurseFrames":true},{"name":"click","target":function(){if(navigator.userAgent.indexOf("Firefox")>0)return"#top-nav-book";else return"#doesnotexist"}()},{"name":"mousedown","target":".ui-autocomplete.ui-front.ui-menu"},{"name":"focus","target":"input, select, textarea, button",
"recurseFrames":true},{"name":"blur","target":"input, select, textarea, button","recurseFrames":true},{"name":"change","target":changeTarget,"recurseFrames":true},{"name":"resize","target":window},{"name":"scroll","target":window},{"name":"hashchange","target":window},{"name":"orientationchange","target":window},{"name":"touchend"},{"name":"touchstart"}]},"overstat":{"enabled":true,"events":[{"name":"click","recurseFrames":true},{"name":"mousemove","recurseFrames":true},{"name":"mouseout","recurseFrames":true}]}}},
"modules":{"performance":{"calculateRenderTime":true,"renderTimeThreshold":6E5,"filter":{"navigationStart":true,"unloadEventStart":true,"unloadEventEnd":true,"redirectStart":true,"redirectEnd":true,"fetchStart":true,"domainLookupStart":true,"domainLookupEnd":true,"connectStart":true,"connectEnd":true,"secureConnectionStart":true,"requestStart":true,"responseStart":true,"responseEnd":true,"domLoading":true,"domInteractive":true,"domContentLoadedEventStart":true,"domContentLoadedEventEnd":true,"domComplete":true,
"loadEventStart":true,"loadEventEnd":true}},"replay":{"domCapture":{"enabled":function(){function isIE10AndBelow(){var myNav=navigator.userAgent.toLowerCase();return myNav.indexOf("msie")!=-1?parseInt(myNav.split("msie")[1]):false}if(isIE10AndBelow()&&isIE10AndBelow()<=9)return false;if((location.hash.indexOf("flight-select")>-1||location.hash.indexOf("date-select")>-1||location.href.indexOf("#payment")>-1||location.href.indexOf("#payment-completion")>-1)&&location.href.indexOf("mobile")==-1||location.href.indexOf("mobile")>
-1&&location.href.indexOf("payment.html")>-1||location.href.indexOf("check-in.html")>-1||location.href.indexOf("/ibe/")>-1||(location.href.indexOf("/mobile/")>-1||location.href.indexOf("/koreanair-mobile/")>-1)&&(location.href.indexOf("ko.html")>-1||location.href.indexOf("en.html")>-1||location.href.indexOf("zh-hk.html")>-1||location.href.indexOf("ru.html")>-1||location.href.indexOf("ja.html")>-1||location.href.indexOf("zh_cn.html")>-1||location.href.indexOf("pt_br.html")>-1||location.href.indexOf("fr.html")>
-1||location.href.indexOf("es.html")>-1||location.href.indexOf("de.html")>-1||location.href.indexOf("ar.html")>-1)||location.href.indexOf("booking-gate.html")>-1||location.href.indexOf("registration.html")>-1||location.href.indexOf("/profile/registration-page.html")>-1||location.href.indexOf("/booking/reservation-search.html")>-1||location.href.indexOf("/booking/on-hold-purchase.html")>-1||location.href.indexOf("/ibe/passenger.html")>-1||location.href.indexOf("/booking/mileage-upgrade.html")>-1||
location.href.indexOf("/booking/reissue-gate.html")>-1||location.href.indexOf("/offers-promotion/promotions-hidden/SKYSHOP.html")>-1||location.href.indexOf("/reissue.html")>-1||location.href.indexOf("/global-payment.html")>-1)return true;else return false}(),"triggers":[{"event":"mousedown","targets":["a","button","a img","a span","button span","input[type\x3dimage]"]},{"event":"load","screenviews":["#error-popup"],"delay":2E3},{"event":"load","screenviews":["#flight-select","#date-select","#passenger-info",
"#payment",""],"delay":500},{"event":"load","screenviews":["root"],"delay":500},{"event":"load","screenviews":["#validation-error"],"delay":500},{"event":"unload","screenviews":["root"]},{"event":"load","screenviews":["#payment-completion"],"delay":1500},{"event":"load","screenviews":["#checkin"],"delay":1500},{"event":"load","screenviews":["#step1-1-selectOldNew","#step1-1-selectAuth","#step1-2-guardianAuth","#step2-inputUserInfo","#step3-registerSuccess","#step3-registerFail","#callback","#register",
"#reservation-detail","#validate","#paymentComplete","#payment-info","#change","#reissue","#cancel-refund","#reservation-list","#paynow","#gate","#paramStrgKey"],"delay":500},{"event":"load","screenviews":["beforeTicketing","afterTicketing"],"delay":0}]}}}});